

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Extension SDK Documentation (CEP) &mdash; Photoshop Scripting Reference  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CSInterface" href="CEP/csinterface.html" />
    <link rel="prev" title="Window.onShow" href="ScriptUI/Window/onShow.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Photoshop Scripting Reference
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Photoshop Scripting Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Extension SDK Documentation (CEP)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CEP/csinterface.html">CSInterface</a></li>
<li class="toctree-l2"><a class="reference internal" href="CEP/event_codes.html">Event Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cep-extensions">CEP Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extension-types">Extension Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#applications-integrated-with-cep">Applications Integrated with CEP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chromium-embedded-framework-cef">Chromium Embedded Framework (CEF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#browser-features-supported-by-cep">Browser Features supported by CEP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#http-cookie">HTTP Cookie</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development-and-debugging">Development and Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#guide-for-migrating-from-cep-7-to-cep-8">Guide for migrating from CEP 7 to CEP 8</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#changes-for-extensions-developers">Changes for Extensions Developers**</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chromium">Chromium</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nodejs">NodeJS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#contexts-in-cep">Contexts in CEP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#development-machine-setup">Development Machine Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#html-extension-builder">HTML Extension Builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signing-extensions">Signing extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-unsigned-extensions">Debugging Unsigned Extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#special-notes-for-mac-10-9-and-higher">Special notes for Mac 10.9 and higher</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#remote-debugging">Remote Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#where-are-the-log-files">Where are the Log Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#plugplug-logs">PlugPlug Logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cephtmlengine-logs">CEPHtmlEngine Logs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cef-log">CEF Log</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#extension-folders">Extension Folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cep-html-test-extensions">CEP HTML Test Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extension-manifest">Extension Manifest</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#extension-manifest-xsd">Extension Manifest XSD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#important-manifest-change-for-cep-5-0-extensions">Important Manifest Change for CEP 5.0 Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#important-manifest-change-for-cep-7-0-extensions">Important Manifest Change for CEP 7.0 Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extension-size">Extension Size</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customize-extension-menu">Customize Extension Menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#high-dpi-panel-icons">High DPI Panel Icons</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dialog-size-based-on-screen-size">Dialog Size based on Screen Size</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#shortcut-keys-for-html-extensions">Shortcut Keys for HTML Extensions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cep-javascript-programming">CEP JavaScript Programming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cep-javascript-libraries">CEP JavaScript Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#api-version">API version</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cep-events">CEP Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vulcan-messages">Vulcan messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-application-dom-from-html-extension">Access Application DOM from Html Extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-html-dom-from-extend-script">Access HTML DOM from extend script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fly-out-menu">Fly-out menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customize-context-menu">Customize Context Menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-display-status-of-html-extension-window">Get Display Status of HTML Extension Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="#getting-and-changing-extension-content-size">Getting and Changing Extension Content Size</a></li>
<li class="toctree-l4"><a class="reference internal" href="#register-invalid-certificate-error-callback">Register invalid certificate error callback</a></li>
<li class="toctree-l4"><a class="reference internal" href="#register-an-interest-in-specific-key-events">Register an interest in specific key events</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-and-get-the-title-of-the-extension-windows">Set and Get the title of the extension windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hi-dpi-display">HI-DPI display</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-javascript-apis">Other JavaScript APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#localization">Localization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#license-locale-and-locales-supported-by-extension">License Locale and locales supported by extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#locale-folder-structure">Locale folder structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sharing-localization-resources-across-multiple-locales">Sharing localization resources across multiple locales</a></li>
<li class="toctree-l4"><a class="reference internal" href="#localized-menu">Localized menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supporting-mena-locales">Supporting MENA locales</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#video-audio-playback">Video/Audio Playback</a></li>
<li class="toctree-l3"><a class="reference internal" href="#webrtc">WebRTC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scroll-bar-tips">Scroll bar tips</a></li>
<li class="toctree-l3"><a class="reference internal" href="#invisible-html-extensions">Invisible HTML Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customize-cef-command-line-parameters">Customize CEF Command Line Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-to-use-cef-command-line-parameters">How to use CEF command line parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#commonly-used-cef-command-parameters">Commonly used CEF command parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#html-extension-persistent">HTML Extension Persistent</a></li>
<li class="toctree-l3"><a class="reference internal" href="#open-url-link-in-default-browser">Open URL link in default browser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interaction-between-extension-and-point-product-during-extension-unload">Interaction between extension and point product during extension unload</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-node-js-apis-cep-6-0-and-prior-releases">Using Node.js APIs (CEP 6.0 and prior releases)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#node-js-support">Node.js Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-js-modules">Node.js Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#samples">Samples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#using-node-js-apis-cep-6-1">Using Node.js APIs (CEP 6.1)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#node-js-support-1">Node.js Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#using-node-js-apis-cep-7-0">Using Node.js APIs (CEP 7.0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limitation-of-cep-process-stdout-stderr">Limitation of cep.process.stdout/stderr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adobe-exchange">Adobe Exchange</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#other-javascript-information">Other JavaScript Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-multiple-jsx-files">Load Multiple JSX files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drag-and-drop">Drag and Drop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#use-drag-and-drop">Use Drag and Drop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disable-drag-and-drop">Disable Drag and Drop</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#external-javascript-libraries">External JavaScript Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#npapi-plug-ins">NPAPI plug-ins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#increase-decrease-font-size-in-html-panel">Increase/Decrease font size in HTML Panel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#javascript-tips">JavaScript Tips</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#check-internet-connection">Check Internet Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-mouse-cursor">Set Mouse Cursor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iframe">iframe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tooltip">Tooltip</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cephtmlengine">CEPHtmlEngine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multi-process-architecture">Multi-process Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ports-opened-in-cephtmlengine">Ports opened in CEPHtmlEngine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cef-chromium-issues">CEF/Chromium Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#contribution">Contribution</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Photoshop Scripting Reseources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Photoshop Scripting Reference</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Extension SDK Documentation (CEP)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cep.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="extension-sdk-documentation-cep">
<h1>Extension SDK Documentation (CEP)<a class="headerlink" href="#extension-sdk-documentation-cep" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This document was copied from the official <a class="reference external" href="https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_8.x/Documentation/CEP%208.0%20HTML%20Extension%20Cookbook.md">Adobe-CEP</a> github
project and all credit is due there for providing in depth documentation into CEP.  I copied it simply to keep everything related to Photoshop in one place.</p>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="CEP/csinterface.html">CSInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="CEP/event_codes.html">Event Codes</a></li>
</ul>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This cookbook is a guide to creating CEP 8.0 HTML/JavaScript Extensions
for Creative Cloud applications. CSXS is the old name before CS6, and
CEP (Common Extensibility Platform) is the new name from CS6. When we talk
about CEP or CSXS, they refer to the same project.</p>
<div class="section" id="cep-extensions">
<h3>CEP Extensions<a class="headerlink" href="#cep-extensions" title="Permalink to this headline">¶</a></h3>
<p>CEP (formerly CSXS) Extensions extend the functionality of the Adobe
point products in which they run. Extensions are loaded into
applications through the PlugPlug Library architecture. Starting from
CEP 4.0, HTML/CSS and JavaScript (ECMAScript 5) can be used to develop
extensions.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/theiviaxx/photoshop-extension-boilerplate">Boilerplate Extension</a></li>
</ul>
</div>
<div class="section" id="extension-types">
<h3>Extension Types<a class="headerlink" href="#extension-types" title="Permalink to this headline">¶</a></h3>
<p>These extension types are supported by CEP. You need to specify an
extension’s type in its manifest.xml.</p>
<ul class="simple">
<li><strong>Panel</strong><ul>
<li>The Panel type behaves like any other application panel. It can be
docked, participates in workspaces, has fly-out menus, and is
re-opened at start-up if open at shutdown.</li>
</ul>
</li>
<li><strong>ModalDialog</strong><ul>
<li>A Modal Dialog type opens a new extension window and forces the
user to interact only with the extenison window before returning
control to the host application. User can interact with host
application only after closing extension window.</li>
</ul>
</li>
<li><strong>Modeless</strong><ul>
<li>A Modeless Dialog type opens a new extension window but doesn’t
force the user to interact with the extension window.</li>
</ul>
</li>
<li><strong>Custom (Since CEP 5.0)</strong><ul>
<li>This type is for invisible extensions. An invisible extension
remains hidden and never becomes visible during its whole life
cycle. Read “Invisible HTML Extensions” for more details.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="applications-integrated-with-cep">
<h3>Applications Integrated with CEP<a class="headerlink" href="#applications-integrated-with-cep" title="Permalink to this headline">¶</a></h3>
<p>These applications support CEP HTML extensions.</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Appli
catio
n</th>
<th class="head">Host
ID</th>
<th class="head">CC
Versi
on</th>
<th class="head">CC
2014
Versi
on</th>
<th class="head">CC
2015
Versi
on</th>
<th class="head">CC
2015
Dot
Versi
on</th>
<th class="head">CC
2017
Versi
on</th>
<th class="head">CC
2018
Versio
n</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Photo
shop</td>
<td>PHSP/
PHXS</td>
<td>14
(CEP
4)</td>
<td>15
(CEP
5)</td>
<td>16
(CEP
6)</td>
<td>17.0.
2
(CEP
7)</td>
<td>18
(CEP
7)</td>
<td>19
(CEP
8)</td>
</tr>
<tr class="row-odd"><td>InDes
ign</td>
<td>IDSN</td>
<td>9
(CEP
4)</td>
<td>10
(CEP
5)</td>
<td>11
(CEP
6)</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>12
(CEP
7)</td>
<td>13
(CEP
8)</td>
</tr>
<tr class="row-even"><td>InCop
y</td>
<td>AICY</td>
<td>9
(CEP
4)</td>
<td>10
(CEP
5)</td>
<td>11
(CEP
6)</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>12
(CEP
7)</td>
<td>13
(CEP
8)</td>
</tr>
<tr class="row-odd"><td>Illus
trato
r</td>
<td>ILST</td>
<td>17
(CEP
4)</td>
<td>18
(CEP
5)</td>
<td>19
(CEP
6)</td>
<td>20
(CEP
7)</td>
<td>21
(CEP
7)</td>
<td>22
(CEP
8)</td>
</tr>
<tr class="row-even"><td>Premi
ere
Pro</td>
<td>PPRO</td>
<td>7
(CEP
4)</td>
<td>8</td>
<td>9</td>
<td>10.3
(CEP
6)</td>
<td>11
(CEP
6)</td>
<td>12
(CEP
8)</td>
</tr>
<tr class="row-odd"><td>Prelu
de</td>
<td>PRLD</td>
<td>2
(CEP
4)</td>
<td>3</td>
<td>4</td>
<td>5.0.1
(CEP
6)</td>
<td>6
(CEP
7)</td>
<td>7 (CEP
8)</td>
</tr>
<tr class="row-even"><td>After
Effec
ts</td>
<td>AEFT</td>
<td>12</td>
<td>13</td>
<td>13.5</td>
<td>13.8.
1
(CEP
6)</td>
<td>14
(CEP
6)</td>
<td>15
(CEP
8)</td>
</tr>
<tr class="row-odd"><td>Anima
te
(Flas
h
Pro)</td>
<td>FLPR</td>
<td>13</td>
<td>14
(CEP
5)</td>
<td>15
(CEP
6)</td>
<td>15.2
(CEP
6.1)</td>
<td>16
(CEP
6.1)</td>
<td>18
(CEP
8)</td>
</tr>
<tr class="row-even"><td>Audit
ion</td>
<td>AUDT</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9.2.1
(CEP
6)</td>
<td>10
(CEP
6)</td>
<td>11</td>
</tr>
<tr class="row-odd"><td>Dream
weave
r</td>
<td>DRWV</td>
<td>13
(CEP
4)</td>
<td>15
(CEP
5)</td>
<td>16
(CEP
6)</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>17
(CEP
6.1)</td>
<td>18
(CEP
8)</td>
</tr>
<tr class="row-even"><td>Muse</td>
<td>MUSE</td>
<td>7.4</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2015</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>2017</td>
<td>2018</td>
</tr>
<tr class="row-odd"><td>Bridg
e</td>
<td>KBRG</td>
<td>6</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>6.3.1</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>8 (CEP
8)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="chromium-embedded-framework-cef">
<h3>Chromium Embedded Framework (CEF)<a class="headerlink" href="#chromium-embedded-framework-cef" title="Permalink to this headline">¶</a></h3>
<p>CEP HTML engine is based on Chromium Embedded Framework version 3
(CEF3). You can find more information about CEF
<a class="reference external" href="http://code.google.com/p/chromiumembedded/">here</a>. Here are the
versions used in CEP:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="16%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Compone
nt</th>
<th class="head">CEP 6.1
and CEP
7.0</th>
<th class="head">CEP 8.0</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CEF 3</td>
<td>CEF 3
release
branch
2272Commi
t
e8e1f98ee
026a62778
eb2269c8e
883426db6
45ea</td>
<td>CEF 3 release branch 2987</td>
</tr>
<tr class="row-odd"><td>Chromiu
m</td>
<td>41.0.2272
.104</td>
<td>57.0.2987.74</td>
</tr>
<tr class="row-even"><td>Node.js</td>
<td>IO.js
1.2.0</td>
<td>Node.js 7.7.4</td>
</tr>
<tr class="row-odd"><td>CEF/Nod
e
integra
tion</td>
<td>Node-WebK
it
0.12.1
(nw.js)</td>
<td>Node-Webkit 0.21.5</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="browser-features-supported-by-cep">
<h3>Browser Features supported by CEP<a class="headerlink" href="#browser-features-supported-by-cep" title="Permalink to this headline">¶</a></h3>
<div class="section" id="http-cookie">
<h4>HTTP Cookie<a class="headerlink" href="#http-cookie" title="Permalink to this headline">¶</a></h4>
<p>CEP supports two kinds of cookies:</p>
<ul class="simple">
<li>Session Cookies - Temporary in-memory cookie which will expire and
disappear when user closes extension</li>
<li>Persistent Cookies - No expiry date or validity interval, stored in
user’s file system</li>
</ul>
<p>Persistent Cookies location:</p>
<ul class="simple">
<li>CEP 4.x<ul>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;USERNAME&gt;\AppData\Local\Temp\cep_cookies\</span></code></li>
<li>Mac: <code class="docutils literal notranslate"><span class="pre">/Users/&lt;USERNAME&gt;/Library/Logs/CSXS/cep_cookies/</span></code></li>
</ul>
</li>
<li>CEP 5.x<ul>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;USERNAME&gt;\AppData\Local\Temp\cep_cache\</span></code></li>
<li>Mac: <code class="docutils literal notranslate"><span class="pre">/Users/&lt;USERNAME&gt;/Library/Logs/CSXS/cep_cache/</span></code></li>
</ul>
</li>
<li>CEP 6.x and later releases<ul>
<li>Windows: <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;USERNAME&gt;\AppData\Local\Temp\cep_cache\</span></code></li>
<li>Mac: <code class="docutils literal notranslate"><span class="pre">/Users/&lt;USERNAME&gt;/Library/Caches/CSXS/cep_cache/</span></code></li>
</ul>
</li>
</ul>
<p>Each persistent cookie is a file. File name is
HostID_HostVersion_ExtensionName, such as
PHXS_15.0.0_com.adobe.extension1.</p>
</div>
</div>
</div>
<div class="section" id="development-and-debugging">
<h2>Development and Debugging<a class="headerlink" href="#development-and-debugging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="guide-for-migrating-from-cep-7-to-cep-8">
<h3>Guide for migrating from CEP 7 to CEP 8<a class="headerlink" href="#guide-for-migrating-from-cep-7-to-cep-8" title="Permalink to this headline">¶</a></h3>
<div class="section" id="changes-for-extensions-developers">
<h4>Changes for Extensions Developers**<a class="headerlink" href="#changes-for-extensions-developers" title="Permalink to this headline">¶</a></h4>
<p>Please be aware that, we are moving to chromium version 57.0.2987.74
from 41.0.2272.104. Similarly for nodejs, we are moving to 7.7.4 from
iojs 1.2.0. This migration guide is written based on CEP team’s testing
and if you find any new issues, please document or share with CEP team.</p>
</div>
<div class="section" id="chromium">
<h4>Chromium<a class="headerlink" href="#chromium" title="Permalink to this headline">¶</a></h4>
<p>Following Chromium APIs have been removed:</p>
<ul class="simple">
<li>MediaStream.label, MediaStream.ended and MediaStream.stop()</li>
<li>Remove getUserMedia() from Insecure Contexts</li>
<li>SVG hasExtension() methods</li>
<li>SVGSVGElement.pixelUnitToMillimeterX and friends</li>
<li>Fetch API: Deprecate and remove Request.context</li>
<li>Document.charset setter</li>
<li>NPAPI plug-in support Range.compareNode() and Range.expand()</li>
<li>WebAudio: Disallow setting AudioBufferSourceNode.buffer more than
once</li>
<li>Deprecate and remove SVGViewElement.viewTarget attribute</li>
<li>Deprecate SVGSVGElement.viewport attribute</li>
<li>Remove FileError interface</li>
<li>Deprecate and remove: WebKit legacy window.postMessage() overload</li>
<li>Deprecate and remove: ‘results’ attribute for</li>
</ul>
</div>
<div class="section" id="nodejs">
<h4>NodeJS<a class="headerlink" href="#nodejs" title="Permalink to this headline">¶</a></h4>
<p>Below listed changes are applicable when –enable-nodejs is passed as
CEFCommandline parameter.</p>
<div class="section" id="new-symbols-in-the-global-context">
<h5>New Symbols in the global context<a class="headerlink" href="#new-symbols-in-the-global-context" title="Permalink to this headline">¶</a></h5>
<p>CEP 8 introduces additional symbol: cep_node in the global context when
nodejs is enabled. cep_node will hold following node specific symbols:</p>
<blockquote>
<div>cep_node members Buffer, global, process and require</div></blockquote>
</div>
<div class="section" id="accessing-nodejs-apis-in-iframe">
<h5>Accessing nodejs APIs in iframe<a class="headerlink" href="#accessing-nodejs-apis-in-iframe" title="Permalink to this headline">¶</a></h5>
<p>nodejs symbols will not be available in iframe’s global context, only
way you can access nodejs APIs within iframe’s context is through
cep_node. When –mixed-context is enabled, global node symbols and
cep_node is available within iframe’s global context as browser and node
gets executed at the same context. It is also important to note that, if
you have existing code to check or use nodejs symbols in iframe’s global
context, it used to work till last release and in the current release,
it breaks in separate context mode.</p>
</div>
<div class="section" id="js-lib-break-due-to-node-symbols-possible-for-many-other-libraries">
<h5>JS Lib Break due to node symbols (possible for many other libraries)<a class="headerlink" href="#js-lib-break-due-to-node-symbols-possible-for-many-other-libraries" title="Permalink to this headline">¶</a></h5>
<p>Newly integrated nodejs adds “module” and “exports” symbols to the
global context. Many libraries such as JQuery relies on its booting
based on the availability of “module” symbol in the global scope. For
ex, JQuery has following code while booting:</p>
<blockquote>
<div><strong>JQuery startup code</strong></div></blockquote>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span>if ( typeof module === &quot;object&quot; &amp;&amp; typeof module.exports === &quot;object&quot; ) {
    // set jQuery in `module`
} else {
   // set jQuery in `window`
}
</pre></div>
</div>
<p>When this code is executed in CEP’s browser with nodejs enabled, it will
make JQuery to load in module context instead of Browser context. This
would cause issues to extension’s startup. Please use below code to
handle such scenarios:</p>
<blockquote>
<div><strong>global symbols handling</strong></div></blockquote>
<div class="code html highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!-- Insert this line above script imports --&gt;
&lt;script&gt;if (typeof module === &#39;object&#39;) {window.module = module; module = undefined;}&lt;/script&gt;
&lt;script&gt;if (typeof exports === &#39;object&#39;) {window.exports = exports; exports = undefined;}&lt;/script&gt;
&lt;!-- extension&#39;s imports --&gt;
&lt;script src=&quot;scripts/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;scripts/csinterface.js&quot;&gt;&lt;/script&gt;
&lt;!-- Insert this line after script imports --&gt;
&lt;script&gt;if (window.module) module = window.module;&lt;/script&gt;
&lt;script&gt;if (window.exports) exports = window.exports;&lt;/script&gt;
</pre></div>
</div>
<p>If you are not using “module” and “exports” in the extension, you could
skip last 2 lines of above code. This logic is similar to how users
handled nodejs’s require while importing. If you are handling require
already, you should continue to handle same way.</p>
</div>
<div class="section" id="require-path-is-absolute-instead-of-relative">
<h5>require path is absolute instead of relative<a class="headerlink" href="#require-path-is-absolute-instead-of-relative" title="Permalink to this headline">¶</a></h5>
<p>Nodejs 7.7.4 requires path to be included as absolute path. So, if you
have nodejs require for the js file,replace the path to absolute instead
of relative. For eg. replace:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">require</span><span class="p">(</span><span class="s2">&quot;./js/lib/jquery.js&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>with</p>
<blockquote>
<div><strong>Win require absolute path for nodejs</strong></div></blockquote>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">loc</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">pathname</span><span class="p">;</span>
<span class="n">var</span> <span class="nb">dir</span> <span class="o">=</span> <span class="n">decodeURI</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">loc</span><span class="o">.</span><span class="n">lastIndexOf</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)));</span>
<span class="n">require</span><span class="p">(</span><span class="nb">dir</span> <span class="o">+</span> <span class="s2">&quot;/js/lib/jquery.js&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>In Mac (there is a change in index passed on to substring)</p>
<blockquote>
<div><strong>Mac require absolute path for nodejs</strong></div></blockquote>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">loc</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">pathname</span><span class="p">;</span>
<span class="n">var</span> <span class="nb">dir</span> <span class="o">=</span> <span class="n">decodeURI</span><span class="p">(</span><span class="n">loc</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">loc</span><span class="o">.</span><span class="n">lastIndexOf</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)));</span>
<span class="n">require</span><span class="p">(</span><span class="nb">dir</span> <span class="o">+</span> <span class="s2">&quot;/js/lib/jquery.js&quot;</span><span class="p">);</span>

<span class="p">(</span><span class="ow">or</span><span class="p">)</span>

<span class="n">require</span><span class="p">(</span><span class="n">__dirname</span> <span class="o">+</span> <span class="s2">&quot;/js/lib/jquery.js&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="contexts-in-cep">
<h4>Contexts in CEP<a class="headerlink" href="#contexts-in-cep" title="Permalink to this headline">¶</a></h4>
<p>CEP will have multiple contexts defined at the start. Following are the
default contexts:</p>
<ol class="arabic">
<li><p class="first"><strong>Browser Context</strong></p>
<p>This is the default JS context associated with CEP’s browser engine.
Apart from Browser objects, CEP’s file system APIs are accessed in
this context.</p>
</li>
<li><p class="first"><strong>Native Context</strong></p>
<p>This is extended context through “cep” object to provide file system
access via CSInterface.js.</p>
</li>
<li><p class="first"><strong>Node Context</strong> (When nodejs is enabled through –enable-nodejs
command line switch)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Separate</span> <span class="n">Context</span>
<span class="mf">2.</span> <span class="n">Mixed</span> <span class="n">Context</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Host app context</strong></p>
<p>This is the context which would be accessed through evalscript API.</p>
</li>
</ol>
<hr class="docutils" />
<p><strong>Separate Context Mode</strong></p>
<p>This context will be created with following command line switch:
–enable-nodejs (and –mixed-context is <strong>not</strong> passed). When CEP is
starting with this context, it would have following symbols:</p>
<ol class="arabic simple">
<li>cep_node: This is treated as global symbol available across frames
and helps to access node symbols. Any modification to this symbol
will be reflected at all the frame context. This symbols is
introduced from CEP 8.</li>
<li>node globals: <a class="reference external" href="https://nodejs.org/api/globals.html">https://nodejs.org/api/globals.html</a> could be accessed
only in main frame (which is current document). If there is a new
frame created in the current document, these symbols will not be
available in frame’s context. Please note that, this behavior is
different CEP 7 for frames. In CEP 7, node globals are available for
access in all frames.</li>
</ol>
<p>Following representation provides visual context:</p>
<blockquote>
<div><strong>Separate Context</strong></div></blockquote>
<div class="code html highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;html&gt;
   &lt;head&gt;
      &lt;!-- cep_node and node globals are available in this context --&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;!-- cep_node and node globals are available in this context --&gt;
      &lt;iframe name=&quot;iframe_1&quot;&gt;
         &lt;!-- only cep_node is available and node globals are not available within this iframe --&gt;
      &lt;/iframe&gt;
      &lt;iframe name=&quot;iframe_2&quot;&gt;
         &lt;!-- only cep_node is available and node globals are not available within this iframe --&gt;
         &lt;!-- In the following line cep_node is modified and this change will be available for any frame&#39;s which is loading later than iframe_2 --&gt;
         cep_node.process.myVar = &quot;Hello&quot;;
      &lt;/iframe&gt;
      &lt;iframe name=&quot;iframe_3&quot;&gt;
         &lt;!-- cep_node is available with change: cep_node.process.myVar(iframe&#39;s loading order is important as change should be accessed after the modifications) and node globals are not available  --&gt;
      &lt;/iframe&gt;
   &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
<p><strong>Mixed Context Mode</strong></p>
<p>This context will be created with following command line switch:
–enable-nodejs and –mixed-context. When CEP is starting with this
context, it would have following symbols:</p>
<ol class="arabic simple">
<li>cep_node: This is treated as local symbol available within each
frames and helps to access node symbols. Any modification to this
symbol will not be reflected to other frames. This symbols is
introduced from CEP 8.</li>
<li>node globals: <a class="reference external" href="https://nodejs.org/api/globals.html">https://nodejs.org/api/globals.html</a> could be accessed
in all the frames which is unique to each frame.</li>
</ol>
<p>Following representation provides visual context</p>
<blockquote>
<div><strong>Mixed Context</strong></div></blockquote>
<div class="code html highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;html&gt;
   &lt;head&gt;
      &lt;!-- cep_node and node globals are available in this context --&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;!-- cep_node and node globals are available in this context --&gt;
      &lt;iframe name=&quot;iframe_1&quot;&gt;
         &lt;!-- only cep_node is available and node globals are available within this iframe --&gt;
      &lt;/iframe&gt;
      &lt;iframe name=&quot;iframe_2&quot;&gt;
         &lt;!-- only cep_node is available and node globals are available within this iframe --&gt;
         &lt;!-- In the following line cep_node is modified and this change will not be available for any other frames --&gt;
         cep_node.process.myVar = &quot;Hello&quot;;
      &lt;/iframe&gt;
      &lt;iframe name=&quot;iframe_3&quot;&gt;
         &lt;!-- cep_node is available which is unique to this context and it&#39;s built from start up time. So, it will not have the changes from previous iframe. node globals are available  --&gt;
      &lt;/iframe&gt;
   &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="development-machine-setup">
<h3>Development Machine Setup<a class="headerlink" href="#development-machine-setup" title="Permalink to this headline">¶</a></h3>
<p>CEP HTML Extensions can be developed on both Windows and Mac platforms.
The development machine needs to have the following applications in
order to successfully develop CSXS extensions:</p>
<ul class="simple">
<li>Adobe Creative Cloud applications supporting CEP HTML extensions.</li>
<li>HTML Extension Builder (Nice to have, but not mandatory).</li>
<li>Adobe ExtendScript Tool Kit (This is available as an optional
install).</li>
<li>Chrome browser for debug workflow.</li>
</ul>
</div>
<div class="section" id="html-extension-builder">
<h3>HTML Extension Builder<a class="headerlink" href="#html-extension-builder" title="Permalink to this headline">¶</a></h3>
<p>HTML Extension Builder is a tool set built on top of Eclipse and can be
used for developing and debugging HTML extensions. Please download the
Extension Builder 3 from
<a class="reference external" href="http://labs.adobe.com/technologies/extensionbuilder3/">here</a>.</p>
</div>
<div class="section" id="signing-extensions">
<h3>Signing extensions<a class="headerlink" href="#signing-extensions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Before you sign the extensions, you need to get or create the
certificate file. Configurator and Adobe Exchange Packer can create
certificates. Developers can get all information
<a class="reference external" href="https://www.adobeexchange.com/resources/7">here</a> after logging
in.</li>
<li>Three tools can be used to sign a HTML extension.</li>
<li><a class="reference external" href="http://labs.adobe.com/downloads/extensionbuilder3.html">Extension Builder
3</a></li>
<li>CC Extensions Signing Toolkit (also on above labs web site)<ul>
<li>Example of using CC Extension signing toolkit:
ccextensionswin64.exe -sign “d:Adobe Layer NamerAdobe Layer Namer” <em>(input extension path)</em> d:AdobeLayerNamer.zxp <em>(output zxp path)</em> d:\sign.p12 <em>(certificate path)</em> 1 <em>(certificate password)</em> Adobe Exchange Packer (please sign in so that you can see it.)</li>
</ul>
</li>
<li><a class="reference external" href="http://www.adobeexchange.com/resources">Adobe Exchange Packer</a>
(please sign in so that you can see it.)</li>
</ul>
</div>
<div class="section" id="debugging-unsigned-extensions">
<h3>Debugging Unsigned Extensions<a class="headerlink" href="#debugging-unsigned-extensions" title="Permalink to this headline">¶</a></h3>
<p>If you are in the midst of development and are not using HTML Extension
Builder for debug workflows and want to bypass the need to sign your
extensions, you can bypass the check for extension signatures by editing
the CSXS preference properties file, located at:</p>
<ul class="simple">
<li>Win: regedit &gt; HKEY_CURRENT_USER/Software/Adobe/CSXS.8, then add a
new entry PlayerDebugMode of type “string” with the value of “1”.</li>
<li>Mac: In the terminal, type:
<code class="docutils literal notranslate"><span class="pre">defaults</span> <span class="pre">write</span> <span class="pre">com.adobe.CSXS.8</span> <span class="pre">PlayerDebugMode</span> <span class="pre">1</span></code> (The plist is
also located at
/Users/<code class="docutils literal notranslate"><span class="pre">&lt;username&gt;</span></code>/Library/Preferences/com.adobe.CSXS.8.plist)</li>
</ul>
<p>These entries will enable debug extensions to be displayed in the host
applications. Please note that, CSXS.8 is given with the assumption
that, you are developing the extension for CEP 8. If you are developing
extension for previous version of CEP, replace 8 with corresponding
version number.</p>
<div class="section" id="special-notes-for-mac-10-9-and-higher">
<h4>Special notes for Mac 10.9 and higher<a class="headerlink" href="#special-notes-for-mac-10-9-and-higher" title="Permalink to this headline">¶</a></h4>
<p>Staring with Mac 10.9, Apple introduced a caching mechanism for plist
files. Your modifications to plist files does not take effect until the
cache gets updated (on a periodic basis, you cannot know exactly when
the update will happen). To make sure your modifications take effect,
there are two methods.</p>
<ul class="simple">
<li>Kill <strong>cfprefsd</strong> process. It will restart automatically. Then the
update takes effect.</li>
<li>Restart your Mac, or log out the current user and re-log in.</li>
<li><a class="reference external" href="http://hints.macworld.com/article.php?story=20130908042828630">More
Information</a></li>
</ul>
</div>
</div>
<div class="section" id="remote-debugging">
<h3>Remote Debugging<a class="headerlink" href="#remote-debugging" title="Permalink to this headline">¶</a></h3>
<p>CEP supports remote debugging for HTML extensions from 5.0.</p>
<ul class="simple">
<li>Create a “.debug” file to the extension root directory such as
<code class="docutils literal notranslate"><span class="pre">Test_Extension\.debug</span></code>. The .debug file contains remote debug
ports. Developers must create this file and use valid debug ports
because both remote debugging and dev tools are based on it.</li>
<li>“.debug” file name is special for both Windows and Mac platforms, it
has to be created via command line.<ul>
<li>On Windows, use “copy con .debug” and “Ctrl+Z” to create an empty
file.</li>
<li>On Mac, use “touch .debug” to create an empty file.</li>
</ul>
</li>
<li>The value of Port should be between 1024 and 65535 (not include
65535), otherwise remote debugging and dev tools will not work.</li>
<li>One extension bundle may have multiple extensions. The .debug file
can specify debug ports for each extension. Here is an example file:</li>
</ul>
<div class="code xml highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ExtensionList&gt;
    &lt;Extension Id=&quot;com.adobe.CEPHTMLTEST.Panel1&quot;&gt;
        &lt;HostList&gt;
            &lt;Host Name=&quot;PHXS&quot; Port=&quot;8000&quot;/&gt;
            &lt;Host Name=&quot;IDSN&quot; Port=&quot;8001&quot;/&gt;
            &lt;Host Name=&quot;AICY&quot; Port=&quot;8002&quot;/&gt;
            &lt;Host Name=&quot;ILST&quot; Port=&quot;8003&quot;/&gt;
            &lt;Host Name=&quot;PPRO&quot; Port=&quot;8004&quot;/&gt;
            &lt;Host Name=&quot;PRLD&quot; Port=&quot;8005&quot;/&gt;
            &lt;Host Name=&quot;FLPR&quot; Port=&quot;8006&quot;/&gt;
            &lt;Host Name=&quot;AUDT&quot; Port=&quot;8007&quot;/&gt;
        &lt;/HostList&gt;
    &lt;/Extension&gt;
    &lt;Extension Id=&quot;com.adobe.CEPHTMLTEST.Panel2&quot;&gt;
        &lt;HostList&gt;
            &lt;Host Name=&quot;PHXS&quot; Port=&quot;8100&quot;/&gt;
            &lt;Host Name=&quot;IDSN&quot; Port=&quot;8101&quot;/&gt;
            &lt;Host Name=&quot;AICY&quot; Port=&quot;8102&quot;/&gt;
            &lt;Host Name=&quot;ILST&quot; Port=&quot;8103&quot;/&gt;
            &lt;Host Name=&quot;PPRO&quot; Port=&quot;8104&quot;/&gt;
            &lt;Host Name=&quot;PRLD&quot; Port=&quot;8105&quot;/&gt;
            &lt;Host Name=&quot;FLPR&quot; Port=&quot;8106&quot;/&gt;
            &lt;Host Name=&quot;AUDT&quot; Port=&quot;8107&quot;/&gt;
        &lt;/HostList&gt;
    &lt;/Extension&gt;
    &lt;Extension Id=&quot;com.adobe.CEPHTMLTEST.ModalDialog&quot;&gt;
        &lt;HostList&gt;
            &lt;Host Name=&quot;PHXS&quot; Port=&quot;8200&quot;/&gt;
            &lt;Host Name=&quot;IDSN&quot; Port=&quot;8201&quot;/&gt;
            &lt;Host Name=&quot;AICY&quot; Port=&quot;8202&quot;/&gt;
            &lt;Host Name=&quot;ILST&quot; Port=&quot;8203&quot;/&gt;
            &lt;Host Name=&quot;PPRO&quot; Port=&quot;8204&quot;/&gt;
            &lt;Host Name=&quot;PRLD&quot; Port=&quot;8205&quot;/&gt;
            &lt;Host Name=&quot;FLPR&quot; Port=&quot;8206&quot;/&gt;
            &lt;Host Name=&quot;AUDT&quot; Port=&quot;8207&quot;/&gt;
        &lt;/HostList&gt;
    &lt;/Extension&gt;
    &lt;Extension Id=&quot;com.adobe.CEPHTMLTEST.Modeless&quot;&gt;
        &lt;HostList&gt;
            &lt;Host Name=&quot;PHXS&quot; Port=&quot;8300&quot;/&gt;
            &lt;Host Name=&quot;IDSN&quot; Port=&quot;8301&quot;/&gt;
            &lt;Host Name=&quot;AICY&quot; Port=&quot;8302&quot;/&gt;
            &lt;Host Name=&quot;ILST&quot; Port=&quot;8303&quot;/&gt;
            &lt;Host Name=&quot;PPRO&quot; Port=&quot;8304&quot;/&gt;
            &lt;Host Name=&quot;PRLD&quot; Port=&quot;8305&quot;/&gt;
            &lt;Host Name=&quot;FLPR&quot; Port=&quot;8306&quot;/&gt;
            &lt;Host Name=&quot;AUDT&quot; Port=&quot;8307&quot;/&gt;
        &lt;/HostList&gt;
    &lt;/Extension&gt;
&lt;/ExtensionList&gt;
</pre></div>
</div>
<p>If you load an extension whose debug port is 8088, you can load the
debugger through <a class="reference external" href="http://localhost:8088/">http://localhost:8088/</a> on Chrome.</p>
</div>
<div class="section" id="where-are-the-log-files">
<h3>Where are the Log Files<a class="headerlink" href="#where-are-the-log-files" title="Permalink to this headline">¶</a></h3>
<div class="section" id="plugplug-logs">
<h4>PlugPlug Logs<a class="headerlink" href="#plugplug-logs" title="Permalink to this headline">¶</a></h4>
<p>Log files with useful debugging information are created for each of the
applications supporting CEP extensions. The platform-specific locations
for the log files are as follows:</p>
<ul class="simple">
<li>Win: <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;USERNAME&gt;\AppData\Local\Temp</span></code></li>
<li>Mac: <code class="docutils literal notranslate"><span class="pre">/Users/&lt;USERNAME&gt;/Library/Logs/CSXS</span></code></li>
</ul>
<p>These files are generated with the following naming conventions:</p>
<ul class="simple">
<li>CEP 4.0 - 6.0 releases: csxs<code class="docutils literal notranslate"><span class="pre">&lt;versionNumber&gt;</span></code>-<code class="docutils literal notranslate"><span class="pre">&lt;HostID&gt;</span></code>.log.
For example, PlugPlug in Illustrator generates log file
csxs8-ILST.log.</li>
<li>CEP 6.1 and later releases:
CEP<code class="docutils literal notranslate"><span class="pre">&lt;versionNumber&gt;</span></code>-<code class="docutils literal notranslate"><span class="pre">&lt;HostID&gt;</span></code>.log. For example, PlugPlug in
Illustrator generates log file CEP8-ILST.log.</li>
</ul>
<p>Logging levels can be modified as per the following levels:</p>
<ul class="simple">
<li>0 - Off (No logs are generated)</li>
<li>1 - Error (the default logging value)</li>
<li>2 - Warn</li>
<li>3 - Info</li>
<li>4 - Debug</li>
<li>5 - Trace</li>
<li>6 - All</li>
</ul>
<p>The <strong>LogLevel</strong> key can be updated at the following location (The
application should be restarted for the log level changes to take
effect):</p>
<ul class="simple">
<li>Win: <code class="docutils literal notranslate"><span class="pre">regedit</span> <span class="pre">&gt;</span> <span class="pre">HKEY_CURRENT_USER/Software/Adobe/CSXS.8</span></code></li>
<li>Mac: <code class="docutils literal notranslate"><span class="pre">/Users/&lt;USERNAME&gt;/Library/Preferences/com.adobe.CSXS.8.plist</span></code></li>
</ul>
<p>For example of Mac, in the terminal do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">defaults</span> <span class="n">write</span> <span class="n">com</span><span class="o">.</span><span class="n">adobe</span><span class="o">.</span><span class="n">CSXS</span><span class="o">.</span><span class="mi">8</span> <span class="n">LogLevel</span> <span class="mi">6</span>
</pre></div>
</div>
</div>
<div class="section" id="cephtmlengine-logs">
<h4>CEPHtmlEngine Logs<a class="headerlink" href="#cephtmlengine-logs" title="Permalink to this headline">¶</a></h4>
<p>In CEP 6.1 and later releases, CEPHtmlEngine generates logs. Each
CEPHtmlEngine instance usually generate two log files, one for browser
process, the other for renderer process. These files are generated with
the following naming conventions:</p>
<ul class="simple">
<li>Browser process:
CEPHtmlEngine<code class="docutils literal notranslate"><span class="pre">&lt;versionNumber&gt;</span></code>-<code class="docutils literal notranslate"><span class="pre">&lt;HostID&gt;</span></code>-<code class="docutils literal notranslate"><span class="pre">&lt;HostVersion&gt;</span></code>-<code class="docutils literal notranslate"><span class="pre">&lt;ExtensionID&gt;</span></code>.log</li>
<li>Renderer process:
CEPHtmlEngine<code class="docutils literal notranslate"><span class="pre">&lt;versionNumber&gt;</span></code>-<code class="docutils literal notranslate"><span class="pre">&lt;HostID&gt;</span></code>-<code class="docutils literal notranslate"><span class="pre">&lt;HostVersion&gt;</span></code>-<code class="docutils literal notranslate"><span class="pre">&lt;ExtensionID&gt;</span></code>-renderer.log</li>
</ul>
<p>For example:</p>
<ul class="simple">
<li>CEPHtmlEngine8-PHXS-18.1.1-com.adobe.DesignLibraries.angular.log</li>
<li>CEPHtmlEngine8-PHXS-18.1.1-com.adobe.DesignLibraries.angular-renderer.log</li>
</ul>
<p>They are also controlled by the PlugPlug log level.</p>
</div>
<div class="section" id="cef-log">
<h4>CEF Log<a class="headerlink" href="#cef-log" title="Permalink to this headline">¶</a></h4>
<p>In CEP 4.0 - 6.0, the Chromium Embedded Framework (CEF) in CEPHtmlEngine
also generates a log:</p>
<ul class="simple">
<li>Win: <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;USERNAME&gt;\AppData\Local\Temp\cef_debug.log</span></code></li>
<li>Mac: <code class="docutils literal notranslate"><span class="pre">/Users/&lt;USERNAME&gt;/Library/Logs/CSXS/cef_debug.log</span></code></li>
</ul>
<p>In CEP 6.1 and later releases, this log is merged into CEPHtmlEngine
log.</p>
</div>
</div>
<div class="section" id="extension-folders">
<h3>Extension Folders<a class="headerlink" href="#extension-folders" title="Permalink to this headline">¶</a></h3>
<p>CEP supports 3 types of extension folders.</p>
<ul class="simple">
<li>Product extension folder. Here is a suggestion, but each point
product can decide where this folder should be. Third party extension
can’t be installed at this location.<ul>
<li>${PP}/CEP/extensions (PPs may use different folder.)</li>
</ul>
</li>
<li>System extension folder<ul>
<li>Win(x86): <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Common</span> <span class="pre">Files\Adobe\CEP\extensions</span></code></li>
<li>Win(x64):
<code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Common</span> <span class="pre">Files\Adobe\CEP\extensions</span></code>, and
<code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Common</span> <span class="pre">Files\Adobe\CEP\extensions</span></code> (since CEP
6.1)</li>
<li>Mac: <code class="docutils literal notranslate"><span class="pre">/Library/Application</span> <span class="pre">Support/Adobe/CEP/extensions</span></code></li>
</ul>
</li>
<li>Per-user extension folder<ul>
<li>Win: <code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;USERNAME&gt;\AppData\Roaming\Adobe\CEP/extensions</span></code></li>
<li>Mac: <code class="docutils literal notranslate"><span class="pre">~/Library/Application</span> <span class="pre">Support/Adobe/CEP/extensions</span></code></li>
</ul>
</li>
</ul>
<p>How does CEP decide which extension to load?</p>
<ul class="simple">
<li>CEP first searches the product extension folder, then the system
extension folder, and finally per-user extension folder.</li>
<li>Extensions without an appropriate host application ID and version are
filtered out.</li>
<li>If two extensions have same extension bundle ID, the one with higher
version is loaded.</li>
<li>If two extensions have same extension bundle ID and same version, the
one whose manifest file has latest modification date is loaded.</li>
<li>If two extensions have same extension bundle ID, same version and
same manifest modification date, CEP loads the first one that is
found.</li>
</ul>
<p>Extension Installation:</p>
<ul class="simple">
<li>Host application installers should install extensions to product
extension folder.</li>
<li>Extensions installed through <a class="reference external" href="https://creative.adobe.com/addons">https://creative.adobe.com/addons</a> should
get install at system extension folder or per-user extension folder.</li>
</ul>
<p>Note:</p>
<ul class="simple">
<li>Character ‘#’ is not allowed in extension folder path on both Windows
and Mac OSX, since CEF treats ‘#’ as a delimiter.</li>
</ul>
</div>
<div class="section" id="cep-html-test-extensions">
<h3>CEP HTML Test Extensions<a class="headerlink" href="#cep-html-test-extensions" title="Permalink to this headline">¶</a></h3>
<p>CEP provides some sample extensions for extension developers. Get its
source code from:
<a class="reference external" href="https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x/Samples">https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x/Samples</a></p>
</div>
<div class="section" id="extension-manifest">
<h3>Extension Manifest<a class="headerlink" href="#extension-manifest" title="Permalink to this headline">¶</a></h3>
<p>The manifest.xml file is required for every extension and provides the
necessary information to configure a CEP extension.
<code class="docutils literal notranslate"><span class="pre">ExtensionManifest</span></code> is the root element of the manifest.xml file.
<code class="docutils literal notranslate"><span class="pre">Extensions</span></code>, <code class="docutils literal notranslate"><span class="pre">ExtensionList</span></code>, and <code class="docutils literal notranslate"><span class="pre">DispatchList</span></code> are the three
child elements of the <code class="docutils literal notranslate"><span class="pre">ExtensionManifest</span></code> root element.</p>
<div class="section" id="extension-manifest-xsd">
<h4>Extension Manifest XSD<a class="headerlink" href="#extension-manifest-xsd" title="Permalink to this headline">¶</a></h4>
<p>All HTML extensions must use 5.0 or above version. Get XSD from the
GitHub repo:
<a class="reference external" href="https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x">https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x</a></p>
<p>To check if the extension’s manifest is in sync with the latest schema,
perform the following steps:</p>
<ol class="arabic simple">
<li>Download the latest schema (ExtensionManifest_``&lt;version&gt;``.xsd).
Please note that, schema is not changed in CEP 8, so refer to
<a class="reference external" href="https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_7.x/ExtensionManifest_v_7_0.xsd">https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_7.x/ExtensionManifest_v_7_0.xsd</a>
for CEP 8 as well.</li>
<li>Navigate <a class="reference external" href="http://tools.decisionsoft.com/schemaValidate/">here</a></li>
<li>Upload the schema and your latest ExtensionManifest (from a real
build to check the validity of the versions).</li>
<li>Hit validate</li>
</ol>
</div>
<div class="section" id="important-manifest-change-for-cep-5-0-extensions">
<h4>Important Manifest Change for CEP 5.0 Extensions<a class="headerlink" href="#important-manifest-change-for-cep-5-0-extensions" title="Permalink to this headline">¶</a></h4>
<p>Make sure correct point product versions are used. Here is an example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">HostList</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PHXS&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;[15.0,15.9]&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PHSP&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;[15.0,15.9]&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">HostList</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This will support Photoshop version 15.0 up to, and including, 15.9. If
you use the following syntax then you are supporting releases up to 15.9
but not including 15.9</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">HostList</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PHXS&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;[15.0,15.9)&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PHSP&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;[15.0,15.9)&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">HostList</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Make sure correct CEP version is used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">RequiredRuntimeList</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">RequiredRuntime</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;CSXS&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;5.0&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">RequiredRuntimeList</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="important-manifest-change-for-cep-7-0-extensions">
<h4>Important Manifest Change for CEP 7.0 Extensions<a class="headerlink" href="#important-manifest-change-for-cep-7-0-extensions" title="Permalink to this headline">¶</a></h4>
<p>CEP 7.0 manifest files now support the use of a <code class="docutils literal notranslate"><span class="pre">HostList</span></code> specific to
an extension in the bundle. For example, the following qualifies as the
“default” <code class="docutils literal notranslate"><span class="pre">HostList</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">&lt;</span><span class="n">ExecutionEnvironment</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HostList</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;DRWV&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;15.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;FLPR&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;15.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;IDSN&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;11.0 &quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;AICY&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;11.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;ILST&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;19.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PHSP&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;16.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PHXS&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;16.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PPRO&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;9.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PRLD&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;4.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;AEFT&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;13.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;DEMO&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;AUDT&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;8.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;LTRM&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;7.0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;MUSE&quot;</span> <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;2015&quot;</span> <span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="n">HostList</span><span class="o">&gt;</span>
  <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">Execution</span> <span class="n">Environment</span><span class="o">&gt;</span>
<span class="o">...</span>
</pre></div>
</div>
<p>However, you can also specify a custom <code class="docutils literal notranslate"><span class="pre">HostList</span></code> on a per extension
basis as in the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">&lt;</span><span class="n">DispatchInfoList</span><span class="o">&gt;</span>
  <span class="o">...</span>
  <span class="o">&lt;</span><span class="n">Extension</span> <span class="n">Id</span><span class="o">=</span><span class="s2">&quot;com.adobe.CEPHTMLTEST.Panel1&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">HostList</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">Host</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;PHXS&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">HostList</span><span class="o">&gt;</span>
    <span class="o">...</span>
  <span class="o">&lt;/</span><span class="n">Extension</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DispatchInfo</span><span class="o">&gt;</span>
  <span class="o">...</span>
  <span class="o">&lt;/</span><span class="n">DispatchInfo</span><span class="o">&gt;</span>
  <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">DispatchInfoList</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">HostLists</span></code> specified under extension tags will override the default
<code class="docutils literal notranslate"><span class="pre">HostList</span></code> specified under the execution environment tag. It is
important to note that adding <code class="docutils literal notranslate"><span class="pre">HostList</span></code> nodes with no child nodes is
akin to turning that particular extension off for all host applications;
this behavior is intentional. Please refrain from specifying both
<code class="docutils literal notranslate"><span class="pre">HostList</span></code> tags and <code class="docutils literal notranslate"><span class="pre">Host</span></code> attributes in <code class="docutils literal notranslate"><span class="pre">DispatchInfo</span></code> tags for
each extension; choose one or the other. Specifying both will more than
likely result in unexpected behavior. The <code class="docutils literal notranslate"><span class="pre">Host</span></code> attribute is only
maintained for backward compatibility. New extensions should use
<code class="docutils literal notranslate"><span class="pre">HostList</span></code> tags, not the Host attribute.</p>
</div>
<div class="section" id="extension-size">
<h4>Extension Size<a class="headerlink" href="#extension-size" title="Permalink to this headline">¶</a></h4>
<p>You can specify extension size, max size and min size in extension
manifest. Size is mandatory; max size and min size are optional.</p>
<p>A modal or modeless dialog is resizable if there are different max and
min size, otherwise it is un-resizable. When you move mouse pointer over
dialog border, CEP shows different cursor for resizable and un-resizable
dialogs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Geometry</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Size</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Height</span><span class="o">&gt;</span><span class="mi">580</span><span class="o">&lt;/</span><span class="n">Height</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Width</span><span class="o">&gt;</span><span class="mi">1000</span><span class="o">&lt;/</span><span class="n">Width</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">Size</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">MaxSize</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Height</span><span class="o">&gt;</span><span class="mi">800</span><span class="o">&lt;/</span><span class="n">Height</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Width</span><span class="o">&gt;</span><span class="mi">1200</span><span class="o">&lt;/</span><span class="n">Width</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">MaxSize</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">MinSize</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Height</span><span class="o">&gt;</span><span class="mi">400</span><span class="o">&lt;/</span><span class="n">Height</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Width</span><span class="o">&gt;</span><span class="mi">600</span><span class="o">&lt;/</span><span class="n">Width</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">MinSize</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">Geometry</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="customize-extension-menu">
<h4>Customize Extension Menu<a class="headerlink" href="#customize-extension-menu" title="Permalink to this headline">¶</a></h4>
<p>This is only supported in InDesign and InCopy.</p>
<p>You can customize the extension menu by editing <code class="docutils literal notranslate"><span class="pre">&lt;menu/&gt;</span></code> item in
manifest. Here is an example. In this example, the Adobe Add-ons
extension is displayed under Windows main menu, rather than extensions
menu under Windows. You can customize the location of extension to
somewhere else by changing the value of attribute Placement in
<code class="docutils literal notranslate"><span class="pre">&lt;menu/&gt;</span></code> item.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ExtensionList&gt;
    &lt;Extension Id=&quot;Adobe Add-ons&quot; Version=&quot;1.0&quot;/&gt;
&lt;/ExtensionList&gt;
&lt;ExecutionEnvironment&gt;
    &lt;HostList&gt;
        &lt;Host Name=&quot;IDSN&quot; Version=&quot;8.0&quot;/&gt;
    &lt;/HostList&gt;
    ...
&lt;/ExecutionEnvironment&gt;
&lt;DispatchInfoList&gt;
    &lt;Extension Id=&quot;com.adobe.CEPHTMLTEST.Panel1&quot;&gt;
        &lt;DispatchInfo&gt;
             ...
             &lt;UI&gt;
                ...
               &lt;Menu Placement=&quot;&#39;Main:&amp;amp;Window&#39;,600.0,&#39;KBSCE Window menu&#39;&quot;&gt;Adobe Add-ons&lt;/Menu&gt;
...
</pre></div>
</div>
</div>
<div class="section" id="high-dpi-panel-icons">
<h4>High DPI Panel Icons<a class="headerlink" href="#high-dpi-panel-icons" title="Permalink to this headline">¶</a></h4>
<p>In high DPI display mode, panel extensions may want to use high DPI
icons. You set these icons in extension’s manifest.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Icons</span><span class="o">&gt;</span>

 <span class="o">&lt;</span><span class="n">Icon</span> <span class="n">Type</span><span class="o">=</span><span class="s2">&quot;Normal&quot;</span><span class="o">&gt;./</span><span class="n">images</span><span class="o">/</span><span class="n">IconLight</span><span class="o">.</span><span class="n">png</span><span class="o">&lt;/</span><span class="n">Icon</span><span class="o">&gt;</span>

 <span class="o">&lt;</span><span class="n">Icon</span> <span class="n">Type</span><span class="o">=</span><span class="s2">&quot;RollOver&quot;</span><span class="o">&gt;./</span><span class="n">images</span><span class="o">/</span><span class="n">IconLight</span><span class="o">.</span><span class="n">png</span><span class="o">&lt;/</span><span class="n">Icon</span><span class="o">&gt;</span>

 <span class="o">&lt;</span><span class="n">Icon</span> <span class="n">Type</span><span class="o">=</span><span class="s2">&quot;DarkNormal&quot;</span><span class="o">&gt;./</span><span class="n">images</span><span class="o">/</span><span class="n">IconDark</span><span class="o">.</span><span class="n">png</span><span class="o">&lt;/</span><span class="n">Icon</span><span class="o">&gt;</span>

 <span class="o">&lt;</span><span class="n">Icon</span> <span class="n">Type</span><span class="o">=</span><span class="s2">&quot;DarkRollOver&quot;</span><span class="o">&gt;./</span><span class="n">images</span><span class="o">/</span><span class="n">IconDark</span><span class="o">.</span><span class="n">png</span><span class="o">&lt;/</span><span class="n">Icon</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">Icons</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>You pack both normal icon files (IconLight.png and IconDark.png) and
high DPI icon files (<a class="reference external" href="mailto:IconLight&#37;&#52;&#48;2X&#46;png">IconLight<span>&#64;</span>2X<span>&#46;</span>png</a> and <a class="reference external" href="mailto:IconDark&#37;&#52;&#48;2X&#46;png">IconDark<span>&#64;</span>2X<span>&#46;</span>png</a>) in your
extension.</p>
<p>Host applications will be able to find and use</p>
<ul class="simple">
<li>IconLight.png and IconDark.png for normal display</li>
<li><a class="reference external" href="mailto:IconLight&#37;&#52;&#48;2X&#46;png">IconLight<span>&#64;</span>2X<span>&#46;</span>png</a> and <a class="reference external" href="mailto:IconDark&#37;&#52;&#48;2X&#46;png">IconDark<span>&#64;</span>2X<span>&#46;</span>png</a> for 200% high DPI display</li>
</ul>
<p>&#64;2X.ext is the industry standard. Please see more details on
<a class="reference external" href="https://developer.apple.com/library/ios/qa/qa1686/_index.html">https://developer.apple.com/library/ios/qa/qa1686/_index.html</a>.</p>
<p>Note: Photoshop supports _x2.ext format.</p>
</div>
<div class="section" id="dialog-size-based-on-screen-size">
<h4>Dialog Size based on Screen Size<a class="headerlink" href="#dialog-size-based-on-screen-size" title="Permalink to this headline">¶</a></h4>
<p>You can specify CEP dialog size as a percentage of screen size. Here is
an example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">UI</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;</span><span class="n">Modeless</span><span class="o">&lt;/</span><span class="n">Type</span><span class="o">&gt;</span>
    <span class="o">...</span>
    <span class="o">&lt;</span><span class="n">Geometry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">ScreenPercentage</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">Height</span><span class="o">&gt;</span><span class="mi">50</span><span class="o">%&lt;/</span><span class="n">Height</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">Width</span><span class="o">&gt;</span><span class="mi">50</span><span class="o">%&lt;/</span><span class="n">Width</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">ScreenPercentage</span><span class="o">&gt;</span>
        <span class="o">...</span>
    <span class="o">&lt;/</span><span class="n">Geometry</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">UI</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="shortcut-keys-for-html-extensions">
<h3>Shortcut Keys for HTML Extensions<a class="headerlink" href="#shortcut-keys-for-html-extensions" title="Permalink to this headline">¶</a></h3>
<p>(Since 5.2)</p>
<p>CEP 5.2 supports shortcut keys for HTML extensions. When focus is on
HTML extensions, these shortcut keys are handled by extension.</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="33%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Windows Keys</th>
<th class="head">Mac Keys</th>
<th class="head">Function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ctrl + A</td>
<td>Command + A</td>
<td>Select All</td>
</tr>
<tr class="row-odd"><td>Ctrl + C</td>
<td>Command + C</td>
<td>Copy</td>
</tr>
<tr class="row-even"><td>Ctrl + V</td>
<td>Command + V</td>
<td>Paste</td>
</tr>
<tr class="row-odd"><td>Ctrl + X</td>
<td>Command + X</td>
<td>Cut</td>
</tr>
</tbody>
</table>
<p>Other shortcut keys are handled by point products, such as pressing Ctrl
+ N to create a new document.</p>
</div>
</div>
<div class="section" id="cep-javascript-programming">
<h2>CEP JavaScript Programming<a class="headerlink" href="#cep-javascript-programming" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cep-javascript-libraries">
<h3>CEP JavaScript Libraries<a class="headerlink" href="#cep-javascript-libraries" title="Permalink to this headline">¶</a></h3>
<p>CEP JavaScript Libraries are counterparts of the Flex CSXS Library and
the CEP IMS Library. They provide JavaScript APIs to access application
and CEP information.</p>
<ul class="simple">
<li>CSInterface.js</li>
<li>IMSInterface.js</li>
<li>Vulcan.js</li>
</ul>
<p>Get them from:
<a class="reference external" href="https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x">https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x</a></p>
<p>To use them, please include these JavaScript files in your HTML
extension.</p>
<div class="section" id="api-version">
<h4>API version<a class="headerlink" href="#api-version" title="Permalink to this headline">¶</a></h4>
<p>The CEP JavaScript APIs keep changing in each new CEP release. The
changes are guaranteed to be backward compatible. For newly added APIs,
a version tag like “Since x.x.x” is added to its API comments indicating
since which CEP version the APIs is available.</p>
<p>You will need to check the version tag against the version of CEP
integrated by the Adobe Product you are using to make sure the API you
want to use is available. To do so, use
<code class="docutils literal notranslate"><span class="pre">CSInterface.getCurrentApiVersion()</span></code> to retrieve the version of CEP
integrated by the Adobe Product. Please note this API itself is
available only since 4.2.0. If you get an error saying
<code class="docutils literal notranslate"><span class="pre">getCurrentApiVersion</span></code> is undefined, then you are running in CEP 4.0
or 4.1. Otherwise, the value returned will tell you the version of CEP
integrated by the Adobe product.</p>
</div>
<div class="section" id="cep-events">
<h4>CEP Events<a class="headerlink" href="#cep-events" title="Permalink to this headline">¶</a></h4>
<p>CEP supports sending and receiving events within an extension, among
extensions in an application, and among extensions in different
applications. Since all extensions are based on the common communication
layer with the same event data format, they can communicate with each
other through CEP events, and even they can communicate with native side
as long as point products invoke
<code class="docutils literal notranslate"><span class="pre">PlugPlugAddEventListener/PlugPlugDispatchEvent</span></code> accordingly.</p>
<p>There are <code class="docutils literal notranslate"><span class="pre">dispatchEvent/addEventListener/removeEventListener</span></code> APIs
available in JavaScript to dispatch and listen for events. Let’s go
through CEP event data format/structure, APIs to dispatch and listen
event, and sample code snippet accordingly in JavaScript.</p>
<div class="section" id="csevent">
<h5>CSEvent<a class="headerlink" href="#csevent" title="Permalink to this headline">¶</a></h5>
<p>In terms of CSEvent, it just means CEP Event here. The data structure of
CSEvent (CEP Event) is as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/**</span>
 <span class="o">*</span> <span class="n">Class</span> <span class="n">CSEvent</span><span class="o">.</span>
 <span class="o">*</span> <span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">it</span> <span class="n">to</span> <span class="n">dispatch</span> <span class="n">a</span> <span class="n">standard</span> <span class="n">CEP</span> <span class="n">event</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="nb">type</span>            <span class="n">Event</span> <span class="nb">type</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">scope</span>       <span class="n">The</span> <span class="n">scope</span> <span class="n">of</span> <span class="n">event</span><span class="p">,</span> <span class="n">can</span> <span class="n">be</span> <span class="s2">&quot;GLOBAL&quot;</span> <span class="ow">or</span> <span class="s2">&quot;APPLICATION&quot;</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">appId</span>       <span class="n">The</span> <span class="n">unique</span> <span class="n">identifier</span> <span class="n">of</span> <span class="n">the</span> <span class="n">application</span> <span class="n">that</span> <span class="n">generated</span> <span class="n">the</span> <span class="n">event</span><span class="o">.</span> <span class="n">Optional</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">extensionId</span> <span class="n">The</span> <span class="n">unique</span> <span class="n">identifier</span> <span class="n">of</span> <span class="n">the</span> <span class="n">extension</span> <span class="n">that</span> <span class="n">generated</span> <span class="n">the</span> <span class="n">event</span><span class="o">.</span> <span class="n">Optional</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@return</span> <span class="n">CSEvent</span> <span class="nb">object</span>
 <span class="o">*/</span>
<span class="n">function</span> <span class="n">CSEvent</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">appId</span><span class="p">,</span> <span class="n">extensionId</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">scope</span> <span class="o">=</span> <span class="n">scope</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">appId</span> <span class="o">=</span> <span class="n">appId</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">extensionId</span> <span class="o">=</span> <span class="n">extensionId</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>You could create a <code class="docutils literal notranslate"><span class="pre">CSEvent</span></code> object and dispatch it by using
<code class="docutils literal notranslate"><span class="pre">CSInterface.dispatchEvent</span></code>. Also you could access its property in
your callback of <code class="docutils literal notranslate"><span class="pre">CSInterface.addEventListener</span></code>. Refer to the section
<code class="docutils literal notranslate"><span class="pre">addEventListener/dispatchEvent</span></code> below for more details.</p>
</div>
<div class="section" id="listen-for-and-dispatch-csevent">
<h5>Listen for and Dispatch CSEvent<a class="headerlink" href="#listen-for-and-dispatch-csevent" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">dispatchEvent/addEventListener/removeEventListener</span></code> APIs are
available in JavaScript world to dispatch and listen for CSEvent.</p>
<p>addEventListener</p>
<p>Here is the definition for addEventListener. Refer to CSInterface.js for
more information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">/**</span>
 <span class="o">*</span> <span class="n">Registers</span> <span class="n">an</span> <span class="n">interest</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">CEP</span> <span class="n">event</span> <span class="n">of</span> <span class="n">a</span> <span class="n">particular</span> <span class="nb">type</span><span class="p">,</span> <span class="ow">and</span>
 <span class="o">*</span> <span class="n">assigns</span> <span class="n">an</span> <span class="n">event</span> <span class="n">handler</span><span class="o">.</span>
 <span class="o">*</span> <span class="n">The</span> <span class="n">event</span> <span class="n">infrastructure</span> <span class="n">notifies</span> <span class="n">your</span> <span class="n">extension</span> <span class="n">when</span> <span class="n">events</span> <span class="n">of</span> <span class="n">this</span> <span class="nb">type</span> <span class="n">occur</span><span class="p">,</span>
 <span class="o">*</span> <span class="n">passing</span> <span class="n">the</span> <span class="n">event</span> <span class="nb">object</span> <span class="n">to</span> <span class="n">the</span> <span class="n">registered</span> <span class="n">handler</span> <span class="n">function</span><span class="o">.</span>
 <span class="o">*</span>  <span class="o">*</span> <span class="nd">@param</span> <span class="nb">type</span>     <span class="n">The</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">event</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">interest</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">listener</span> <span class="n">The</span> <span class="n">JavaScript</span> <span class="n">handler</span> <span class="n">function</span> <span class="ow">or</span> <span class="n">method</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">obj</span>      <span class="n">Optional</span><span class="p">,</span> <span class="n">the</span> <span class="nb">object</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">handler</span> <span class="n">method</span><span class="p">,</span> <span class="k">if</span> <span class="nb">any</span><span class="o">.</span>
 <span class="o">*</span>         <span class="n">Default</span> <span class="ow">is</span> <span class="n">null</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">addEventListener</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">listener</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</pre></div>
</div>
<p>One thing needs to be mentioned here is both named and anonymous
callback functions are supported in CSInterface.addEventListener. * An
example of how to use named callback function in
<code class="docutils literal notranslate"><span class="pre">CSInterface.addEventListener</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>function callback(event)
{
    console.log(“type=” + event.type + “, data=” + event.data);
}

var csInterface = new CSInterface();
csInterface.addEventListener(“com.adobe.cep.test”, callback); //invoke the function
</pre></div>
</div>
<ul class="simple">
<li>An example of how to use anonymous callback function in
<code class="docutils literal notranslate"><span class="pre">CSInterface.addEventListener</span></code>.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>var csInterface = new CSInterface();
csInterface.addEventListener(“com.adobe.cep.test”, function (event)
{
     console.log(“type=” + event.type + “, data=” + event.data);
}
); // Anonymous function is the second parameter
</pre></div>
</div>
<p>The event.data can be an object (i.e.&nbsp;you could use an object as
event.data).</p>
<p>Before CEP 6.1, we regarded every attribute in event.data object as a
regular string, but from CEP 6.1, we revised the behavior that keep the
type of each attribute in event.data as it was. If the value is a valid
JSON string, CEP will parse it natively and convert it to an object.
Here is an example on how to use it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>var csInterface = new CSInterface();
csInterface.addEventListener(“com.adobe.cep.test”, function (event)
{
     var obj = event.data;
     console.log(“type=” + event.type + “, data.property1=” + obj.property1 + “, data.property2=” + obj.property2);
}
); // Anonymous function is the second parameter
</pre></div>
</div>
<p>dispatchEvent</p>
<p>Here is the definition for <code class="docutils literal notranslate"><span class="pre">CSInterface.dispatchEvent</span></code>. Refer to
<code class="docutils literal notranslate"><span class="pre">CSInterface.js</span></code> for more details.</p>
<div class="code javascript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/**</span>
 <span class="o">*</span> <span class="n">Triggers</span> <span class="n">a</span> <span class="n">CEP</span> <span class="n">event</span> <span class="n">programmatically</span><span class="o">.</span> <span class="n">Yoy</span> <span class="n">can</span> <span class="n">use</span> <span class="n">it</span> <span class="n">to</span> <span class="n">dispatch</span>
 <span class="o">*</span> <span class="n">an</span> <span class="n">event</span> <span class="n">of</span> <span class="n">a</span> <span class="n">predefined</span> <span class="nb">type</span><span class="p">,</span> <span class="ow">or</span> <span class="n">of</span> <span class="n">a</span> <span class="nb">type</span> <span class="n">you</span> <span class="n">have</span> <span class="n">defined</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">event</span> <span class="n">A</span> \<span class="n">c</span> <span class="n">CSEvent</span> <span class="nb">object</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">dispatchEvent</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>Here are three samples to demonstrate how to dispatch an event in
JavaScript.</p>
<ul class="simple">
<li>An example of how to dispatch event in JavaScript.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">csInterface</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>
<span class="n">var</span> <span class="n">event</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSEvent</span><span class="p">(</span><span class="s2">&quot;com.adobe.cep.test&quot;</span><span class="p">,</span> <span class="s2">&quot;APPLICATION&quot;</span><span class="p">);</span>
<span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;This is a test!&quot;</span><span class="p">;</span>
<span class="n">cSInterface</span><span class="o">.</span><span class="n">dispatchEvent</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>Another example of creating event object and setting property, then
dispatch it.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">csInterface</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>
<span class="n">var</span> <span class="n">event</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSEvent</span><span class="p">();</span>
<span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;com.adobe.cep.test&quot;</span><span class="p">;</span>
<span class="n">event</span><span class="o">.</span><span class="n">scope</span> <span class="o">=</span> <span class="s2">&quot;APPLICATION&quot;</span><span class="p">;</span>
<span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;This is a test!&quot;</span><span class="p">;</span>
<span class="n">cSInterface</span><span class="o">.</span><span class="n">dispatchEvent</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>An example of dispatching an event whose data is an object.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">event</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSEvent</span><span class="p">(</span><span class="s2">&quot;com.adobe.cep.test&quot;</span><span class="p">,</span> <span class="s2">&quot;APPLICATION&quot;</span><span class="p">);</span>
<span class="n">var</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Object</span><span class="p">();</span>
<span class="n">obj</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span>
<span class="n">obj</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span><span class="p">;</span>
<span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">obj</span><span class="p">;</span>
<span class="n">cSInterface</span><span class="o">.</span><span class="n">dispatchEvent</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="communication-between-native-point-product-and-cep-extensions">
<h5>Communication between Native Point Product and CEP extensions<a class="headerlink" href="#communication-between-native-point-product-and-cep-extensions" title="Permalink to this headline">¶</a></h5>
<p>CEP event based communication between native point product and CEP
extensions is simple. You can use
<code class="docutils literal notranslate"><span class="pre">PlugPlugAddEventListener/PlugPlugDispatchEvent</span></code> to communicate with
CEP extensions.</p>
<p>Please refer the following steps:</p>
<p>First, define a callback function in CEP extension:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">callback</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span> <span class="n">do</span> <span class="n">something</span> <span class="n">here</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then call CSInterface.addEventListener with event type you want to
listen and the callback function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>var csInterface = new CSInterface();
csInterface.addEventListener(“com.adobe.cep.test”, callback);
</pre></div>
</div>
</div>
<div class="section" id="standard-events-in-point-products">
<h5>Standard Events in Point Products<a class="headerlink" href="#standard-events-in-point-products" title="Permalink to this headline">¶</a></h5>
<p>Following table lists the standard events supported by point products.</p>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-text">Standard Events in Point Products</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Event Type</th>
<th class="head">Event Scope</th>
<th class="head">Description</th>
<th class="head">Event Parameter</th>
<th class="head">PS</th>
<th class="head">ID</th>
<th class="head">AI</th>
<th class="head">AN</th>
<th class="head">PR</th>
<th class="head">PL</th>
<th class="head">AU</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>documentAfterActivate</td>
<td>APPLICATION</td>
<td>Event fired when a document has been activated(after new/open document; after document has retrieved focus).</td>
<td>URL to the active document. If the doc was not save, the NAME will be set instead of the URL.</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>documentAfterDeactivate</td>
<td>APPLICATION</td>
<td>Event fired when the active document has been de-activated.(after document loses focus)</td>
<td>URL to the active document. If the doc was not save, the name will be set instead of the URL.</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>applicationBeforeQuit</td>
<td>APPLICATION</td>
<td>Event fired when the application got the signal to start to terminate.</td>
<td>none</td>
<td>No</td>
<td>Issue</td>
<td>Issue</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>applicationActivate</td>
<td>APPLICATION</td>
<td>Event fired when the Application got an ‘activation’ event from the OS.</td>
<td>none</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>documentAfterSave</td>
<td>APPLICATION</td>
<td>Event fired after the document has been saved</td>
<td>URL to the saved document.</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>(<img alt="Yes" src="https://github.com/Adobe-CEP/CEP-Resources/raw/master/CEP_8.x/Documentation/images/correct.png" /> = supported, <img alt="No" src="https://github.com/Adobe-CEP/CEP-Resources/raw/master/CEP_8.x/Documentation/images/cross.png" /> = not supported)</p>
<p>Note: CEP is unloaded from the point products ID and AI right after the
event <code class="docutils literal notranslate"><span class="pre">applicationBeforeQuit</span></code> is emitted from the point products,
therefore CEP may have no chance to get this event handled in HTML
extensions.</p>
</div>
<div class="section" id="specific-events-in-products">
<h5>Specific Events in Products<a class="headerlink" href="#specific-events-in-products" title="Permalink to this headline">¶</a></h5>
<p>Photoshop</p>
<p>In Photoshop, the following specific events are defined:</p>
<ul class="simple">
<li>com.adobe.PhotoshopPersistent</li>
<li>com.adobe.PhotoshopUnPersistent</li>
<li>com.adobe.PhotoshopWorkspaceSet</li>
<li>com.adobe.PhotoshopWorkspaceGet</li>
<li>com.adobe.PhotoshopWorkspaceAware</li>
<li>com.adobe.PhotoshopWorkspaceData</li>
<li>com.adobe.PhotoshopWorkspaceRequest</li>
<li>com.adobe.PhotoshopRegisterEvent</li>
<li>com.adobe.PhotoshopUnRegisterEvent</li>
<li>com.adobe.PhotoshopLoseFocus</li>
<li>com.adobe.PhotoshopQueryDockingState</li>
</ul>
<p>For example, a CEP extension yields the mouse focus back to Photoshop by
sending the <code class="docutils literal notranslate"><span class="pre">com.adobe.PhotoshopLoseFocus</span></code> event:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">csInterface</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>
<span class="n">var</span> <span class="n">event</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSEvent</span><span class="p">(</span><span class="s2">&quot;com.adobe.PhotoshopLoseFocus&quot;</span><span class="p">,</span> <span class="s2">&quot;APPLICATION&quot;</span><span class="p">);</span>
<span class="n">event</span><span class="o">.</span><span class="n">extensionId</span> <span class="o">=</span> <span class="n">csInterface</span><span class="o">.</span><span class="n">getExtensionID</span><span class="p">();</span>
<span class="n">csInterface</span><span class="o">.</span><span class="n">dispatchEvent</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">com.adobe.PhotoshopCallback</span></code> will be removed in Photoshop 17.0 as
adding a listener results in all CS Extensions receiving the event. As
of Photoshop CC 2015 June release, developers can now use this
alternative, which fixes the broadcast issue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">csInterface</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">&quot;com.adobe.PhotoshopJSONCallback&quot;</span> <span class="o">+</span> <span class="n">gExtensionID</span><span class="p">,</span> <span class="n">PhotoshopCallbackUnique</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="invoke-point-products-scripts-from-html-extension">
<h5>Invoke point product’s scripts from html extension<a class="headerlink" href="#invoke-point-products-scripts-from-html-extension" title="Permalink to this headline">¶</a></h5>
<p>First, define a callback function in CEP extension:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">evalScriptCallback</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">{</span>
   <span class="o">//</span> <span class="n">process</span> <span class="n">the</span> <span class="n">result</span> <span class="n">string</span> <span class="n">here</span><span class="o">.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then call <code class="docutils literal notranslate"><span class="pre">CSInterface.evalScript</span></code> with the script you want to call
and the callback function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">script</span> <span class="o">=</span> <span class="s2">&quot;app.documents.add&quot;</span><span class="p">;</span>  <span class="o">//</span><span class="n">Demo</span> <span class="n">script</span>
<span class="n">CSInterface</span><span class="o">.</span><span class="n">evalScript</span><span class="p">(</span><span class="n">script</span><span class="p">,</span> <span class="n">evalScriptCallback</span><span class="p">);</span>
</pre></div>
</div>
<p>Please be aware that the script in evalScript and the jsx file which is
configured in <code class="docutils literal notranslate"><span class="pre">&lt;ScriptPath&gt;</span></code> in the extension’s manifest are executed
in host application’s ExtendScript engine, which runs in host
application’s main thread. On the other hand, CEP event is also
dispatched from host application’s main thread. If the interaction
between the script and CEP event is needed, please split the script into
small parts and call them separately so that CEP event has a chance to
be scheduled.</p>
</div>
</div>
<div class="section" id="vulcan-messages">
<h4>Vulcan messages<a class="headerlink" href="#vulcan-messages" title="Permalink to this headline">¶</a></h4>
<p>Starting with CEP 5.0, global CEP Events whose scope attribute is set to
“GLOBAL” are no longer supported. Please use the APIs in Vulcan.js
instead.</p>
<div class="section" id="vulcan-message">
<h5>Vulcan message<a class="headerlink" href="#vulcan-message" title="Permalink to this headline">¶</a></h5>
<p>The data structure of Vulcan message in JavaScript is as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/**
 * @class VulcanMessage
 * Message type for sending messages between host applications.
 * A message of this type can be sent to the designated destination
 * when appId and appVersion are provided and valid. Otherwise,
 * the message is broadcast to all running Vulcan-enabled applications.
 *
 * To send a message between extensions running within one
 * application, use the &lt;code&gt;CSEvent&lt;/code&gt; type in CSInterface.js.
 *
 * @param type            The message type.
 * @param appId           The peer appId.
 * @param appVersion      The peer appVersion.
 *
 */
function VulcanMessage(type, appId, appVersion)
{
    this.type = type;
    this.scope = VulcanMessage.SCOPE_SUITE;
    this.appId = requiredParamsValid(appId) ? appId : VulcanMessage.DEFAULT_APP_ID;
    this.appVersion = requiredParamsValid(appVersion) ? appVersion : VulcanMessage.DEFAULT_APP_VERSION;
    this.data = VulcanMessage.DEFAULT_DATA;
}

VulcanMessage.TYPE_PREFIX    = &quot;vulcan.SuiteMessage.&quot;;
VulcanMessage.SCOPE_SUITE    = &quot;GLOBAL&quot;;
VulcanMessage.DEFAULT_APP_ID = &quot;UNKNOWN&quot;;
VulcanMessage.DEFAULT_APP_VERSION = &quot;UNKNOWN&quot;;
VulcanMessage.DEFAULT_DATA = &quot;&lt;data&gt;&lt;payload&gt;&lt;/payload&gt;&lt;/data&gt;&quot;;
VulcanMessage.dataTemplate = &quot;&lt;data&gt;{0}&lt;/data&gt;&quot;;
VulcanMessage.payloadTemplate = &quot;&lt;payload&gt;{0}&lt;/payload&gt;&quot;;
</pre></div>
</div>
</div>
<div class="section" id="listen-for-and-dispatch-vulcan-message">
<h5>Listen for and Dispatch Vulcan message<a class="headerlink" href="#listen-for-and-dispatch-vulcan-message" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">addMessageListener</span></code>, <code class="docutils literal notranslate"><span class="pre">removeMessageListener</span></code>, <code class="docutils literal notranslate"><span class="pre">dispatchMessage</span></code>
and <code class="docutils literal notranslate"><span class="pre">getPayload</span></code> APIs are available to dispatch and listen for Vulcan
messages. The API definitions are as below. Refer to Vulcan.js for more
information.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/**</span>
 <span class="o">*</span> <span class="n">Registers</span> <span class="n">a</span> <span class="n">message</span> <span class="n">listener</span> <span class="n">callback</span> <span class="n">function</span> <span class="k">for</span> <span class="n">a</span> <span class="n">Vulcan</span> <span class="n">message</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="nb">type</span>            <span class="n">The</span> <span class="n">message</span> <span class="nb">type</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">callback</span>        <span class="n">The</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">that</span> <span class="n">handles</span> <span class="n">the</span> <span class="n">message</span><span class="o">.</span>
 <span class="o">*</span>                        <span class="n">Takes</span> <span class="n">one</span> <span class="n">argument</span><span class="p">,</span> <span class="n">the</span> <span class="n">message</span> <span class="nb">object</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">obj</span>             <span class="n">Optional</span><span class="p">,</span> <span class="n">the</span> <span class="nb">object</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">callback</span> <span class="n">method</span><span class="p">,</span> <span class="k">if</span> <span class="nb">any</span><span class="o">.</span>
 <span class="o">*</span>                        <span class="n">Default</span> <span class="ow">is</span> <span class="n">null</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">Vulcan</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">addMessageListener</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Removes</span> <span class="n">a</span> <span class="n">registered</span> <span class="n">message</span> <span class="n">listener</span> <span class="n">callback</span> <span class="n">function</span> <span class="k">for</span> <span class="n">a</span> <span class="n">Vulcan</span> <span class="n">message</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="nb">type</span>            <span class="n">The</span> <span class="n">message</span> <span class="nb">type</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">callback</span>        <span class="n">The</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">that</span> <span class="n">was</span> <span class="n">registered</span><span class="o">.</span>
 <span class="o">*</span>                        <span class="n">Takes</span> <span class="n">one</span> <span class="n">argument</span><span class="p">,</span> <span class="n">the</span> <span class="n">message</span> <span class="nb">object</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">obj</span>             <span class="n">Optional</span><span class="p">,</span> <span class="n">the</span> <span class="nb">object</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">callback</span> <span class="n">method</span><span class="p">,</span> <span class="k">if</span> <span class="nb">any</span><span class="o">.</span>
 <span class="o">*</span>                        <span class="n">Default</span> <span class="ow">is</span> <span class="n">null</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">Vulcan</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">removeMessageListener</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Dispatches</span> <span class="n">a</span> <span class="n">Vulcan</span> <span class="n">message</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">vulcanMessage</span>   <span class="n">The</span> <span class="n">message</span> <span class="nb">object</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">Vulcan</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">dispatchMessage</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">vulcanMessage</span><span class="p">)</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Retrieves</span> <span class="n">the</span> <span class="n">message</span> <span class="n">payload</span> <span class="n">of</span> <span class="n">a</span> <span class="n">Vulcan</span> <span class="n">message</span> <span class="k">for</span> <span class="n">the</span> <span class="n">registered</span> <span class="n">message</span> <span class="n">listener</span> <span class="n">callback</span> <span class="n">function</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">vulcanMessage</span>   <span class="n">The</span> <span class="n">message</span> <span class="nb">object</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@return</span>                <span class="n">A</span> <span class="n">string</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">message</span> <span class="n">payload</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">Vulcan</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">getPayload</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">vulcanMessage</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is the example to demonstrate how to use the APIs in JavaScript.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">testVulcanMessage</span> <span class="o">=</span> <span class="n">new</span> <span class="n">VulcanMessage</span><span class="p">(</span><span class="n">VulcanMessage</span><span class="o">.</span><span class="n">TYPE_PREFIX</span> <span class="o">+</span> <span class="s2">&quot;test&quot;</span><span class="p">);</span>
<span class="n">testVulcanMessage</span><span class="o">.</span><span class="n">setPayload</span><span class="p">(</span><span class="s2">&quot;To be or not to be that is a question!&quot;</span><span class="p">);</span>

<span class="n">var</span> <span class="n">callback</span> <span class="o">=</span> <span class="n">function</span> <span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">alert</span><span class="p">(</span><span class="n">VulcanInterface</span><span class="o">.</span><span class="n">getPayload</span><span class="p">(</span><span class="n">message</span><span class="p">));</span>
<span class="p">};</span>

<span class="n">VulcanInterface</span><span class="o">.</span><span class="n">addMessageListener</span><span class="p">(</span><span class="n">testVulcanMessage</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">callback</span><span class="p">);</span>
<span class="n">VulcanInterface</span><span class="o">.</span><span class="n">dispatchMessage</span><span class="p">(</span><span class="n">testVulcanMessage</span><span class="p">);</span>
<span class="o">...</span>
<span class="n">VulcanInterface</span><span class="o">.</span><span class="n">removeMessageListener</span><span class="p">(</span><span class="n">testVulcanMessage</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">callback</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">getEndPoints</span></code> and <code class="docutils literal notranslate"><span class="pre">getSelfEndPoint</span></code> APIs are available to support
point-to-point Vulcan message. The API definitions are as below. Refer
to Vulcan.js for more information.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/**</span>
 <span class="o">*</span> <span class="n">Gets</span> <span class="nb">all</span> <span class="n">available</span> <span class="n">endpoints</span> <span class="n">of</span> <span class="n">the</span> <span class="n">running</span> <span class="n">Vulcan</span><span class="o">-</span><span class="n">enabled</span> <span class="n">applications</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="n">Since</span> <span class="mf">7.0</span><span class="o">.</span><span class="mi">0</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@return</span>                <span class="n">The</span> <span class="n">array</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">available</span> <span class="n">endpoints</span><span class="o">.</span>
 <span class="o">*</span> <span class="n">An</span> <span class="n">example</span> <span class="n">endpoint</span> <span class="n">string</span><span class="p">:</span>
 <span class="o">*</span> <span class="o">&lt;</span><span class="n">endPoint</span><span class="o">&gt;</span>
 <span class="o">*</span>   <span class="o">&lt;</span><span class="n">appId</span><span class="o">&gt;</span><span class="n">PHXS</span><span class="o">&lt;/</span><span class="n">appId</span><span class="o">&gt;</span>
 <span class="o">*</span>   <span class="o">&lt;</span><span class="n">appVersion</span><span class="o">&gt;</span><span class="mf">16.1</span><span class="o">.</span><span class="mi">0</span><span class="o">&lt;/</span><span class="n">appVersion</span><span class="o">&gt;</span>
 <span class="o">*</span> <span class="o">&lt;/</span><span class="n">endPoint</span><span class="o">&gt;</span>
 <span class="o">*/</span>
<span class="n">Vulcan</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">getEndPoints</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Gets</span> <span class="n">the</span> <span class="n">endpoint</span> <span class="k">for</span> <span class="n">itself</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="n">Since</span> <span class="mf">7.0</span><span class="o">.</span><span class="mi">0</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@return</span>                <span class="n">The</span> <span class="n">endpoint</span> <span class="n">string</span> <span class="k">for</span> <span class="n">itself</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">Vulcan</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">getSelfEndPoint</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span>
</pre></div>
</div>
<p>The steps to send point-to-point Vulcan message are as follows:</p>
<ul class="simple">
<li>Get all available endpoints.</li>
<li>Select the destination endpoint and get appId and appVersion from it.</li>
<li>Create Vulcan message with the destination <code class="docutils literal notranslate"><span class="pre">appId</span></code> and
<code class="docutils literal notranslate"><span class="pre">appVersion</span></code>.</li>
<li>Dispatch Vulcan message.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">endPointList</span> <span class="o">=</span> <span class="n">VulcanInterface</span><span class="o">.</span><span class="n">getEndPoints</span><span class="p">();</span>
<span class="n">var</span> <span class="n">destIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">var</span> <span class="n">appId</span> <span class="o">=</span> <span class="n">GetValueByKey</span><span class="p">(</span><span class="n">endPointList</span><span class="p">[</span><span class="n">destIndex</span><span class="p">],</span> <span class="s2">&quot;appId&quot;</span><span class="p">);</span>
<span class="n">var</span> <span class="n">appVersion</span> <span class="o">=</span> <span class="n">GetValueByKey</span><span class="p">(</span><span class="n">endPointList</span><span class="p">[</span><span class="n">destIndex</span><span class="p">],</span> <span class="s2">&quot;appVersion&quot;</span><span class="p">);</span>
<span class="n">var</span> <span class="n">message</span> <span class="o">=</span> <span class="n">new</span> <span class="n">VulcanMessage</span><span class="p">(</span><span class="n">VulcanMessage</span><span class="o">.</span><span class="n">TYPE_PREFIX</span> <span class="o">+</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">appId</span><span class="p">,</span> <span class="n">appVersion</span><span class="p">);</span>
<span class="n">message</span><span class="o">.</span><span class="n">setPayload</span><span class="p">(</span><span class="s2">&quot;blablabla...&quot;</span><span class="p">);</span>
<span class="n">VulcanInterface</span><span class="o">.</span><span class="n">dispatchMessage</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="access-application-dom-from-html-extension">
<h4>Access Application DOM from Html Extension<a class="headerlink" href="#access-application-dom-from-html-extension" title="Permalink to this headline">¶</a></h4>
<p>There are two separate JavaScript engines here.</p>
<ul class="simple">
<li>JavaScript engine of host application - Application DOM/Extend script
DOM</li>
<li>JavaScript engine of CEP HTML runtime - HTML DOM</li>
</ul>
<p>Application DOM is not available in CEP extension’s engine and CEP DOM
is not available in host application’s engine.</p>
<p>To access Application DOM from CEP extensions, CEP JavaScript library
provides an API, <code class="docutils literal notranslate"><span class="pre">CSInterface.evalScript</span></code>, to execute extend script to
access the host application’s DOM. Here is a brief diagram to indicate
how to access Application DOM through this API.</p>
<div class="figure" id="id3">
<img alt="enter image description here" src="https://github.com/Adobe-CEP/CEP-Resources/raw/master/CEP_8.x/Documentation/images/dom_comm.jpg" />
<p class="caption"><span class="caption-text">enter image description here</span></p>
</div>
<p>Here is the sample JavaScript code snippet in HTML extension.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">csInterface</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>
<span class="n">csInterface</span><span class="o">.</span><span class="n">evalScript</span><span class="p">(</span><span class="s1">&#39;app.documents.add();&#39;</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">result</span><span class="p">){</span>
  <span class="n">alert</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="access-html-dom-from-extend-script">
<h4>Access HTML DOM from extend script<a class="headerlink" href="#access-html-dom-from-extend-script" title="Permalink to this headline">¶</a></h4>
<p>There is no way to access HTML extension’s JavaScript DOM directly from
Application’s ExtendScript. If you need to access it, CEP event based
communication can be used as a substitution.</p>
<p>CEP creates a library which uses External Object mechanism of
ExtendScript to send CSXS events. The external object provides an
ExtendScript class CSXSEvent for creating and dispatching
application-level CSXS events. On HTML extension side, event listeners
can be registered via the <code class="docutils literal notranslate"><span class="pre">addEventListener</span></code> API in <code class="docutils literal notranslate"><span class="pre">CSInterface.js</span></code>
to listen to the events.</p>
<p>Some CC applications (Photoshop, Illustrator, Premiere Pro) integrated
PlugPlugExternalObject library and started to support this functionality
in CC 2014 release. Audition supports this functionality since CC 2015.1
release.</p>
<div class="section" id="sample-code">
<h5>Sample Code<a class="headerlink" href="#sample-code" title="Permalink to this headline">¶</a></h5>
<p>ExtendScript developers need to create external object instance first.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">externalObjectName</span> <span class="o">=</span> <span class="s2">&quot;PlugPlugExternalObject&quot;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">mylib</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ExternalObject</span><span class="p">(</span> <span class="s2">&quot;lib:&quot;</span> <span class="o">+</span> <span class="n">externalObjectName</span> <span class="p">);</span>
</pre></div>
</div>
<p>And then create the CSXSEvent instance.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">eventObj</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSXSEvent</span><span class="p">();</span>
<span class="n">eventObj</span><span class="o">.</span><span class="n">type</span><span class="o">=</span><span class="s2">&quot;documentCreated&quot;</span><span class="p">;</span>
<span class="n">eventObj</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="s2">&quot;blahblah&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>At last use this instance to dispatch event:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">eventObj</span><span class="o">.</span><span class="n">dispatch</span><span class="p">();</span>
</pre></div>
</div>
<p>Below is the sample code of ExtendScript.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">var</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>

<span class="n">cs</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">&quot;documentCreated&quot;</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">event</span><span class="p">){</span>
  <span class="n">alert</span><span class="p">(</span><span class="s1">&#39;Cool!&#39;</span> <span class="o">+</span> <span class="n">event</span><span class="o">.</span><span class="n">data</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">var</span> <span class="n">extendScript</span> <span class="o">=</span> <span class="s1">&#39;var externalObjectName = &quot;PlugPlugExternalObject&quot;; var mylib = new ExternalObject( &quot;lib:&quot; + externalObjectName ); app.document.add(); var eventObj = new CSXSEvent(); eventObj.type=&quot;documentCreated&quot;; eventObj.data=&quot;blahblah&quot;; eventObj.dispatch();&#39;</span>
<span class="n">cs</span><span class="o">.</span><span class="n">evalScript</span><span class="p">(</span><span class="n">extendScript</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="fly-out-menu">
<h4>Fly-out menu<a class="headerlink" href="#fly-out-menu" title="Permalink to this headline">¶</a></h4>
<p>For fly-out menu on the native panel of HTML extension, it has been
supported.</p>
<p>Two new interfaces are added to CSInterface.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">setPanelFlyoutMenu</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">menu</span><span class="p">){</span>
  <span class="n">window</span><span class="o">.</span><span class="n">__adobe_cep__</span><span class="o">.</span><span class="n">invokeSync</span><span class="p">(</span><span class="s2">&quot;setPanelFlyoutMenu&quot;</span><span class="p">,</span> <span class="n">menu</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">updatePanelMenuItem</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">menuItemLabel</span><span class="p">,</span> <span class="n">enabled</span><span class="p">,</span> <span class="n">checked</span><span class="p">){</span>
  <span class="n">var</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">getHostCapabilities</span><span class="p">()</span><span class="o">.</span><span class="n">EXTENDED_PANEL_MENU</span><span class="p">){</span>
    <span class="n">var</span> <span class="n">itemStatus</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MenuItemStatus</span><span class="p">(</span><span class="n">menuItemLabel</span><span class="p">,</span> <span class="n">enabled</span><span class="p">,</span> <span class="n">checked</span><span class="p">);</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">__adobe_cep__</span><span class="o">.</span><span class="n">invokeSync</span><span class="p">(</span><span class="s2">&quot;updatePanelMenuItem&quot;</span><span class="p">,</span> <span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">itemStatus</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The “menu” parameter for <code class="docutils literal notranslate"><span class="pre">setPanelFlyoutMenu</span></code> is a XML string. Below
is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Menu</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Id</span><span class="o">=</span><span class="s2">&quot;menuItemId1&quot;</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample1&quot;</span> <span class="n">Enabled</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="n">Checked</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample2&quot;</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample2-1&quot;</span> <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample2-1-1&quot;</span> <span class="n">Enabled</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="n">Checked</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">/&gt;</span>
     <span class="o">&lt;/</span><span class="n">MenuItem</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample2-2&quot;</span> <span class="n">Enabled</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="n">Checked</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="n">MenuItem</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;---&quot;</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample3&quot;</span> <span class="n">Enabled</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="n">Checked</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">Menu</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If user wants to be notified when clicking a menu item, user needs to
register <code class="docutils literal notranslate"><span class="pre">com.adobe.csxs.events.flyoutMenuClicked</span></code> event by calling
<code class="docutils literal notranslate"><span class="pre">AddEventListener</span></code>. When a menu item is clicked, the event callback
function will be called. The <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute of event is an object
which contains <code class="docutils literal notranslate"><span class="pre">menuId</span></code> and <code class="docutils literal notranslate"><span class="pre">menuName</span></code> attributes.</p>
<p>To get notified when fly-out menu is opened and closed, register event
listener for below event types respectively:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;com.adobe.csxs.events.flyoutMenuOpened&quot;</span>
<span class="s2">&quot;com.adobe.csxs.events.flyoutMenuClosed&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="customize-context-menu">
<h4>Customize Context Menu<a class="headerlink" href="#customize-context-menu" title="Permalink to this headline">¶</a></h4>
<div class="section" id="set-and-update-context-menu">
<h5>Set and Update Context Menu<a class="headerlink" href="#set-and-update-context-menu" title="Permalink to this headline">¶</a></h5>
<p>There are three APIs in <code class="docutils literal notranslate"><span class="pre">CSInterface</span></code> for developers to set and update
the customized context menu.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">setContextMenu</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">callback</span><span class="p">){</span>
  <span class="n">window</span><span class="o">.</span><span class="n">__adobe_cep__</span><span class="o">.</span><span class="n">invokeAsync</span><span class="p">(</span><span class="s2">&quot;setContextMenu&quot;</span><span class="p">,</span> <span class="n">menu</span><span class="p">,</span> <span class="n">callback</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">setContextMenuByJSON</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">callback</span><span class="p">){</span>
  <span class="n">window</span><span class="o">.</span><span class="n">__adobe_cep__</span><span class="o">.</span><span class="n">invokeAsync</span><span class="p">(</span><span class="s2">&quot;setContextMenuByJSON&quot;</span><span class="p">,</span> <span class="n">menu</span><span class="p">,</span> <span class="n">callback</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">updateContextMenuItem</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">menuItemID</span><span class="p">,</span> <span class="n">enabled</span><span class="p">,</span> <span class="n">checked</span><span class="p">){</span>
  <span class="n">var</span> <span class="n">itemStatus</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ContextMenuItemStatus</span><span class="p">(</span><span class="n">menuItemID</span><span class="p">,</span> <span class="n">enabled</span><span class="p">,</span> <span class="n">checked</span><span class="p">);</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">__adobe_cep__</span><span class="o">.</span><span class="n">invokeSync</span><span class="p">(</span><span class="s2">&quot;updateContextMenuItem&quot;</span><span class="p">,</span> <span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">itemStatus</span><span class="p">));</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The “menu” parameter for “setContextMenu” is a XML string.</p>
<ul class="simple">
<li>Id - Menu item ID. It should be plain text.</li>
<li>Icon - Menu item icon path. It is a path relative to the extension
root path. For optimal display results please supply a 16 x 16px PNG
icon as larger dimensions will increase the size of the menu item.</li>
<li>Label - Menu item label. It supports localized languages.</li>
<li>Enabled - Whether the item is enabled or disabled. Default value is
true.</li>
<li>Checkable - Whether the item can be checked/unchecked. Default value
is false.</li>
<li>Checked - Whether the item is checked or unchecked. Default value is
false.</li>
<li>The items with icons and checkable items cannot coexist on the same
menu level. The former take precedences over the latter.</li>
</ul>
<p>Here is an example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Menu</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Id</span><span class="o">=</span><span class="s2">&quot;menuItemId1&quot;</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample1&quot;</span> <span class="n">Enabled</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="n">Checked</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="n">Icon</span><span class="o">=</span><span class="s2">&quot;./img/small_16X16.png&quot;</span><span class="o">/&gt;</span>
   <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Id</span><span class="o">=</span><span class="s2">&quot;menuItemId2&quot;</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample2&quot;</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Id</span><span class="o">=</span><span class="s2">&quot;menuItemId2-1&quot;</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample2-1&quot;</span> <span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Id</span><span class="o">=</span><span class="s2">&quot;menuItemId2-1-1&quot;</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample2-1-1&quot;</span> <span class="n">Enabled</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="n">Checkable</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="n">Checked</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">/&gt;</span>
     <span class="o">&lt;/</span><span class="n">MenuItem</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Id</span><span class="o">=</span><span class="s2">&quot;menuItemId2-2&quot;</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample2-2&quot;</span> <span class="n">Enabled</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="n">Checkable</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="n">Checked</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">/&gt;</span>
   <span class="o">&lt;/</span><span class="n">MenuItem</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;---&quot;</span> <span class="o">/&gt;</span>
   <span class="o">&lt;</span><span class="n">MenuItem</span> <span class="n">Id</span><span class="o">=</span><span class="s2">&quot;menuItemId3&quot;</span> <span class="n">Label</span><span class="o">=</span><span class="s2">&quot;TestExample3&quot;</span> <span class="n">Enabled</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="n">Checked</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">Menu</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The “callback” parameter is the callback function which is called when
user clicks a menu item. The only parameter is the ID of clicked menu
item.</p>
<p>If you prefer to using a JSON string to set context menu, you can
achieve it by calling <code class="docutils literal notranslate"><span class="pre">setContextMenuByJSON</span></code>.</p>
<p>The “menu” parameter for <code class="docutils literal notranslate"><span class="pre">setContextMenuByJSON</span></code> is a JSON string.</p>
<ul class="simple">
<li>id - Menu item ID. It should be plain text.</li>
<li>icon - Menu item icon path. It is a path relative to the extension
root path. For optimal display results please supply a 16 x 16px PNG
icon as larger dimensions will increase the size of the menu item.</li>
<li>label - Menu item label. It supports localized languages.</li>
<li>enabled - Whether the item is enabled or disabled. Default value is
true.</li>
<li>checkable - Whether the item can be checked/unchecked. Default value
is false.</li>
<li>checked - Whether the item is checked or unchecked. Default value is
false.</li>
<li>The items with icons and checkable items cannot coexist on the same
menu level. The former take precedences over the latter.</li>
</ul>
<p>Here is an JSON example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
       <span class="s2">&quot;menu&quot;</span><span class="p">:</span> <span class="p">[</span>
           <span class="p">{</span>
               <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;menuItemId1&quot;</span><span class="p">,</span>
               <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;testExample1&quot;</span><span class="p">,</span>
               <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
               <span class="s2">&quot;checkable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
               <span class="s2">&quot;checked&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
               <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;./img/small_16X16.png&quot;</span>
           <span class="p">},</span>
           <span class="p">{</span>
               <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;menuItemId2&quot;</span><span class="p">,</span>
               <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;testExample2&quot;</span><span class="p">,</span>
               <span class="s2">&quot;menu&quot;</span><span class="p">:</span> <span class="p">[</span>
                   <span class="p">{</span>
                       <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;menuItemId2-1&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;testExample2-1&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;menu&quot;</span><span class="p">:</span> <span class="p">[</span>
                           <span class="p">{</span>
                               <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;menuItemId2-1-1&quot;</span><span class="p">,</span>
                               <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;testExample2-1-1&quot;</span><span class="p">,</span>
                               <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                               <span class="s2">&quot;checkable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                               <span class="s2">&quot;checked&quot;</span><span class="p">:</span> <span class="n">true</span>
                           <span class="p">}</span>
                       <span class="p">]</span>
                   <span class="p">},</span>
                   <span class="p">{</span>
                       <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;menuItemId2-2&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;testExample2-2&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                       <span class="s2">&quot;checkable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                       <span class="s2">&quot;checked&quot;</span><span class="p">:</span> <span class="n">true</span>
                   <span class="p">}</span>
               <span class="p">]</span>
           <span class="p">},</span>
           <span class="p">{</span>
               <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;---&quot;</span>
           <span class="p">},</span>
           <span class="p">{</span>
               <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;menuItemId3&quot;</span><span class="p">,</span>
               <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;testExample3&quot;</span><span class="p">,</span>
               <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
               <span class="s2">&quot;checkable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
               <span class="s2">&quot;checked&quot;</span><span class="p">:</span> <span class="n">false</span>
           <span class="p">}</span>
       <span class="p">]</span>
   <span class="p">}</span>
</pre></div>
</div>
<p>If developers do not set context menu, CEP shows default items (Back,
Forward, View Source, etc.). This is compatible with previous releases.
If developers set context menu which has no any default id, CEP removes
all default items and show customized items only. If one of the
following default ids is set, the default menu item against that id will
be shown.</p>
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">id</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>“print”</td>
</tr>
<tr class="row-odd"><td>“back”</td>
</tr>
<tr class="row-even"><td>“view source”</td>
</tr>
<tr class="row-odd"><td>“forward”</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ol class="arabic simple">
<li>They are case-insensitive.</li>
<li>The quotation marks is not a part of an id.</li>
<li>The default callback associated to each id will be used and cannot be
customised.</li>
</ol>
</div>
<div class="section" id="disable-context-menu">
<h5>Disable Context Menu<a class="headerlink" href="#disable-context-menu" title="Permalink to this headline">¶</a></h5>
<p>To disable the context menu, you can call <code class="docutils literal notranslate"><span class="pre">setContextMenu</span></code> by null.</p>
<p>Another way is to add <code class="docutils literal notranslate"><span class="pre">oncontextmenu=&quot;return</span> <span class="pre">false;&quot;</span></code> to the HTML tag.
For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">body</span> <span class="n">oncontextmenu</span><span class="o">=</span><span class="s2">&quot;return false;&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="other-implementation-of-context-menu">
<h5>Other Implementation of Context Menu<a class="headerlink" href="#other-implementation-of-context-menu" title="Permalink to this headline">¶</a></h5>
<p>See <a class="reference external" href="http://www.javascripttoolbox.com/lib/contextmenu/">examples</a>.</p>
</div>
</div>
<div class="section" id="get-display-status-of-html-extension-window">
<h4>Get Display Status of HTML Extension Window<a class="headerlink" href="#get-display-status-of-html-extension-window" title="Permalink to this headline">¶</a></h4>
<div class="section" id="two-ways-to-get-html-extension-window">
<h5>Two ways to get HTML extension window<a class="headerlink" href="#two-ways-to-get-html-extension-window" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Register “com.adobe.csxs.events.panelWindowStatusChanged” CSXS event</li>
<li>Call isWindowVisible JavaScript API.</li>
</ul>
</div>
<div class="section" id="resister-com-adobe-csxs-events-panelwindowstatuschanged-csxs-event">
<h5>Resister “com.adobe.csxs.events.panelWindowStatusChanged” CSXS event<a class="headerlink" href="#resister-com-adobe-csxs-events-panelwindowstatuschanged-csxs-event" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Observe <code class="docutils literal notranslate"><span class="pre">com.adobe.csxs.events.panelWindowStatusChanged</span></code> CSXS
event, this is for PANEL extensions only. If user hides the panel
window by clicking “X” or collapsing window, this event is going to
be sent to observer with the “true” or “false” string in data
attribute, while the event is not going to be sent if the extension
is closed. That is to say, currently, only panel extensions which are
running on Ai and persistent can receive this event, when the
extension is hiding, event with “false” data is sent while the
extension is shown, event with “true” is sent.</li>
</ul>
</div>
<div class="section" id="call-iswindowvisible-api">
<h5>Call isWindowVisible API<a class="headerlink" href="#call-iswindowvisible-api" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Call <code class="docutils literal notranslate"><span class="pre">isWindowVisible</span></code> JS interface. Both dialog and panel
extension enable to access this API, but it always returns true for
modal and modeless dialog extensions while it always returns false
for invisible extensions.</li>
</ul>
</div>
</div>
<div class="section" id="getting-and-changing-extension-content-size">
<h4>Getting and Changing Extension Content Size<a class="headerlink" href="#getting-and-changing-extension-content-size" title="Permalink to this headline">¶</a></h4>
<div class="section" id="getting-extension-content-size">
<h5>Getting Extension Content Size<a class="headerlink" href="#getting-extension-content-size" title="Permalink to this headline">¶</a></h5>
<p>Getting extension content size can be done using <code class="docutils literal notranslate"><span class="pre">window.innerWidth</span></code>
and <code class="docutils literal notranslate"><span class="pre">window.innerHeight</span></code>. However, if you are accessing these
properties from inside an IFrame, you are actually accessing the
properties of the IFrame’s window object, not the ones for the HTML
document. To access the top-most one, you will need to do
<code class="docutils literal notranslate"><span class="pre">parent.window.innerWidth</span></code> and <code class="docutils literal notranslate"><span class="pre">parent.window.innerWidth</span></code>.</p>
</div>
<div class="section" id="changing-extension-content-size">
<h5>Changing Extension Content Size<a class="headerlink" href="#changing-extension-content-size" title="Permalink to this headline">¶</a></h5>
<p>Changing modal and modeless extension content size is supported in all
Adobe applications that supports CEP. However, changing panel HTML
extension size is not supported in Premiere Pro, Prelude, After Effects
and Audition.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">resizeContent</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</pre></div>
</div>
<p>The width and height parameters are expected to be unsigned integers.
The function does nothing when parameters of other types are passed.</p>
<p>Please note that extension min/max size constraints as specified in the
manifest file apply and take precedence. If the specified size is out of
the min/max size range, the min or max bounds will be used. When a panel
is docked with other panels, there are chances that it won’t resize as
expected even when the specified size satisfies the min and max
constraints. The restriction is imposed by host applications, not by
CEP.</p>
</div>
</div>
<div class="section" id="register-invalid-certificate-error-callback">
<h4>Register invalid certificate error callback<a class="headerlink" href="#register-invalid-certificate-error-callback" title="Permalink to this headline">¶</a></h4>
<p>(Since 6.1) Register the invalid certificate error callback for an
extension. This callback will be triggered when the extension try to
access the web site that contains the invalid certificate on main frame.
But if the extension does not call this function and try to access the
web site containing the invalid certificate, a default error page will
be shown:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">registerInvalidCertificateCallback</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="register-an-interest-in-specific-key-events">
<h4>Register an interest in specific key events<a class="headerlink" href="#register-an-interest-in-specific-key-events" title="Permalink to this headline">¶</a></h4>
<p>(Since 6.1) Register an interest in some key events to prevent them from
being sent to the host application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">registerKeyEventsInterest</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">keyEventsInterest</span><span class="p">)</span>
</pre></div>
</div>
<p>This function works with modeless extensions and panel extensions.
Generally all the key events will be sent to the host application for
these two extensions if the current focused element is not text input or
dropdown.</p>
<p>If you want to intercept some key events and you want them to be handled
in the extension, please call this function in advance to prevent them
being sent to the host application.</p>
<ul class="simple">
<li>keyEventsInterest: A JSON string describing those key events you are
interested in. A null object or an empty string will lead to removing
the interest</li>
</ul>
<p>This JSON string should be an array, each object has following keys:</p>
<ul class="simple">
<li>keyCode: [Required] represents an OS system dependent virtual key
code identifying the unmodified value of the pressed key.</li>
<li>ctrlKey: [optional] a Boolean that indicates if the control key was
pressed (true) or not (false) when the event occurred.</li>
<li>altKey: [optional] a Boolean that indicates if the alt key was
pressed (true) or not (false) when the event occurred.</li>
<li>shiftKey: [optional] a Boolean that indicates if the shift key was
pressed (true) or not (false) when the event occurred.</li>
<li>metaKey: [optional] (Mac Only) a Boolean that indicates if the Meta
key was pressed (true) or not (false) when the event occurred. On
Macintosh keyboards, this is the command key. To detect Windows key
on Windows, please use keyCode instead.</li>
</ul>
<p>To learn all key codes:</p>
<ul class="simple">
<li><a class="reference external" href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx">Windows</a></li>
<li>Mac<ul>
<li><code class="docutils literal notranslate"><span class="pre">/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/Headers/Events.h</span></code></li>
<li>Install <a class="reference external" href="https://itunes.apple.com/us/app/key-codes/id414568915?mt=12">Key
Codes</a>
from the Mac App Store.</li>
</ul>
</li>
</ul>
<p>An example JSON string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
   <span class="s2">&quot;keyCode&quot;</span><span class="p">:</span> <span class="mi">48</span>
<span class="p">},</span>
<span class="p">{</span>
   <span class="s2">&quot;keyCode&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
   <span class="s2">&quot;ctrlKey&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="set-and-get-the-title-of-the-extension-windows">
<h4>Set and Get the title of the extension windows<a class="headerlink" href="#set-and-get-the-title-of-the-extension-windows" title="Permalink to this headline">¶</a></h4>
<p>(Since 6.1) CEP 6.1 introduces two APIs to set and get the title of
extension windows. Those functions work with modal and modeless
extensions in all Adobe products, and panel extensions in Photoshop,
InDesign, InCopy, Illustrator, Animate (Flash Pro) and Audition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">setWindowTitle</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">title</span><span class="p">){</span>
  <span class="n">window</span><span class="o">.</span><span class="n">__adobe_cep__</span><span class="o">.</span><span class="n">invokeSync</span><span class="p">(</span><span class="s2">&quot;setWindowTitle&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">CSInterface</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">getWindowTitle</span> <span class="o">=</span> <span class="n">function</span><span class="p">(){</span>
  <span class="k">return</span> <span class="n">window</span><span class="o">.</span><span class="n">__adobe_cep__</span><span class="o">.</span><span class="n">invokeSync</span><span class="p">(</span><span class="s2">&quot;getWindowTitle&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hi-dpi-display">
<h3>HI-DPI display<a class="headerlink" href="#hi-dpi-display" title="Permalink to this headline">¶</a></h3>
<p>CEP JavaScript library provides APIs for detecting the availability of
HI-DPI display on the Mac platform.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">CSInterface.getScaleFactor()</span></code> Use this function to retrieve the
scale factor of the display on which the calling extension window is
located.</li>
<li><code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">scaleFactor</span> <span class="pre">=</span> <span class="pre">CSLibrary.getScaleFactor();</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">CSInterface.setScaleFactorChangedHandler()</span></code> Use this function to
add a event handler that will be called when calling extension window
is moved between HI-DPI and non-HI-DPI displays.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">window</span><span class="o">.</span><span class="n">scaleFactorHandler</span> <span class="o">=</span> <span class="n">function</span><span class="p">(){</span>
<span class="n">var</span> <span class="n">scaleFactor</span> <span class="o">=</span> <span class="n">CSLibrary</span><span class="o">.</span><span class="n">getScaleFactor</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">scaleFactor</span> <span class="o">===</span> <span class="mi">2</span><span class="p">){</span>
<span class="n">imgSrc</span> <span class="o">=</span> <span class="s2">&quot;../img/PS_AppIcon_r.png&quot;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="n">imgSrc</span> <span class="o">=</span> <span class="s2">&quot;../img/PS_AppIcon.png&quot;</span>
<span class="p">}</span>
<span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">src</span> <span class="o">=</span> <span class="n">imgSrc</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">CSLibrary</span><span class="o">.</span><span class="n">setScaleFactorChangedHandler</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">scaleFactorHandler</span><span class="p">);</span>
</pre></div>
</div>
<p>CEP 5.2 has already supported HiDPI on Windows.</p>
</div>
<div class="section" id="other-javascript-apis">
<h3>Other JavaScript APIs<a class="headerlink" href="#other-javascript-apis" title="Permalink to this headline">¶</a></h3>
<p>The JavaScript engine in CEP HTML engine had been extended to provide
some APIs, including:</p>
<ul class="simple">
<li>local file access</li>
<li>native process</li>
<li>others</li>
</ul>
<p>These APIs are in JavaScript DOM and can be used as other built-in
JavaScript APIs. You do <strong>NOT</strong> need to include any JavaScript files.</p>
<p>API reference is as below.</p>
<p><code class="docutils literal notranslate"><span class="pre">CEPEngine_extensions.js</span></code> is actually a CEF extension that is built in
CEPHtmlEngine to expand the DOM of CEPHtmlEngine, like create/delete
folder, read/write file, create/quit process, and so on. You can invoke
these built-in APIs directly in your HTML extension without any
JavaScript file reference.</p>
<p>For example, you want to</p>
<ul class="simple">
<li>create a folder.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/test&quot;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">makedir</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">result</span><span class="o">.</span><span class="n">err</span><span class="p">){</span>
  <span class="o">...//</span> <span class="n">success</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="o">...//</span> <span class="n">fail</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>write a file.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;This is a test.&quot;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/test&quot;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">result</span><span class="o">.</span><span class="n">err</span><span class="p">){</span>
  <span class="o">...//</span> <span class="n">success</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="o">...//</span> <span class="n">fail</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Write file with base64 encoding mode. To use this mode, you need to
convert the input string to a base64-encoded string before calling
<code class="docutils literal notranslate"><span class="pre">writeFile()</span></code>. The following is an example.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;This is a test.&quot;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/test&quot;</span><span class="p">;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">cep</span><span class="o">.</span><span class="n">encoding</span><span class="o">.</span><span class="n">convertion</span><span class="o">.</span><span class="n">utf8_to_b64</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>

<span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">cep</span><span class="o">.</span><span class="n">encoding</span><span class="o">.</span><span class="n">Base64</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">result</span><span class="o">.</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">...//</span> <span class="n">success</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="o">...//</span> <span class="n">fail</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>read a file.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/test&quot;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">readFile</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">err</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
  <span class="o">//</span><span class="n">success</span>
  <span class="n">alert</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">data</span><span class="p">);</span> <span class="o">//</span><span class="n">result</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="n">file</span> <span class="n">content</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="o">...//</span> <span class="n">fail</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Read file with base64 encoding mode in which the read data after
<code class="docutils literal notranslate"><span class="pre">readFile</span></code> called is converted to a base-encoded string. You need
to decode this string to any format you want. The following is an
example</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/tmp/test&quot;</span><span class="p">;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">readFile</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">cep</span><span class="o">.</span><span class="n">encoding</span><span class="o">.</span><span class="n">Base64</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">err</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
  <span class="o">//</span><span class="n">success</span>
  <span class="n">var</span> <span class="n">base64Data</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">data</span><span class="p">;</span>
  <span class="n">var</span> <span class="n">data</span> <span class="o">=</span> <span class="n">cep</span><span class="o">.</span><span class="n">encoding</span><span class="o">.</span><span class="n">convertion</span><span class="o">.</span><span class="n">b64_to_utf8</span><span class="p">(</span><span class="n">base64Data</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="o">...//</span> <span class="n">fail</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Create a process and check if it’s running.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">createProcess</span><span class="p">(</span><span class="s2">&quot;usr/X11/bin/xterm&quot;</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">err</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
  <span class="n">var</span> <span class="n">pid</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">data</span><span class="p">;</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">isRunning</span><span class="p">(</span><span class="n">pid</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">data</span> <span class="o">===</span> <span class="n">true</span><span class="p">){</span>
    <span class="o">//</span> <span class="n">running</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You could use other APIs like delete folder, rename folder, set file
permission, delete file, show file open dialog, quit process, etc.</p>
<p>We have the following samples that demonstrate use of some of these
APIs:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Adobe-CEP/Samples/tree/master/Flickr">https://github.com/Adobe-CEP/Samples/tree/master/Flickr</a></li>
<li><a class="reference external" href="https://github.com/Adobe-CEP/Samples/tree/master/Collage">https://github.com/Adobe-CEP/Samples/tree/master/Collage</a></li>
<li><a class="reference external" href="https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x/Samples">https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x/Samples</a></li>
</ul>
</div>
<div class="section" id="localization">
<h3>Localization<a class="headerlink" href="#localization" title="Permalink to this headline">¶</a></h3>
<p>In order to support localization, both the extension and the host
application must provide locale information. There are two distinct
types of locale information.</p>
<ul class="simple">
<li>The <strong>License Locale</strong> (returned as the applicationLocale by the AMT
library)</li>
<li>The <strong>Effective/Language/UI</strong> Locale (which is controlled by the user
in the OS settings).</li>
</ul>
<p>The extension must provide the list of supported locales for both the
License Locale and the Language Locale via the <code class="docutils literal notranslate"><span class="pre">HostEnvironment</span></code>. This
is particularly important in cases where the extension has features for
a specific locale. <code class="docutils literal notranslate"><span class="pre">PlugPlug</span></code> library expects the host application to
provide the locale information as part of the environmental data.</p>
<p>JavaScript API <code class="docutils literal notranslate"><span class="pre">HostEnvironment</span></code> has the <code class="docutils literal notranslate"><span class="pre">appLocale</span></code> property in
place.</p>
<div class="section" id="license-locale-and-locales-supported-by-extension">
<h4>License Locale and locales supported by extension<a class="headerlink" href="#license-locale-and-locales-supported-by-extension" title="Permalink to this headline">¶</a></h4>
<p>CEP checks the <strong>License Locale</strong> of host application against supported
locales declared in extensions locale list to determine if the extension
is loadable for the host application.</p>
</div>
<div class="section" id="locale-folder-structure">
<h4>Locale folder structure<a class="headerlink" href="#locale-folder-structure" title="Permalink to this headline">¶</a></h4>
<p>Each property file should be placed in its corresponding locale folder.
For example, the en_US property file should be
<code class="docutils literal notranslate"><span class="pre">&lt;YourExtension&gt;/locale/en_US/messages.properties</span></code>. Users can define a
default property file (<code class="docutils literal notranslate"><span class="pre">&lt;YourExtension&gt;/locale/messages.properties</span></code>),
which will be used when the corresponding locale file is not defined.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">YourExtension</span><span class="o">/</span>
     <span class="o">|-</span><span class="n">csxs</span><span class="o">/</span>
     <span class="o">|-</span><span class="n">locale</span><span class="o">/</span>                      <span class="o">&lt;--</span> <span class="n">Directory</span> <span class="k">for</span> <span class="n">localized</span> <span class="n">resources</span>
         <span class="o">|--</span> <span class="n">messages</span><span class="o">.</span><span class="n">properties</span>    <span class="o">&lt;--</span> <span class="n">The</span> <span class="n">one</span> <span class="n">to</span> <span class="n">fallback</span> <span class="n">to</span> <span class="k">if</span> <span class="n">no</span> <span class="n">localized</span> <span class="n">resources</span> <span class="ow">is</span> <span class="n">provided</span> <span class="k">for</span> <span class="n">a</span> <span class="n">locale</span>
         <span class="o">|--</span> <span class="n">en_US</span><span class="o">/</span>
         <span class="o">|</span>        <span class="o">|-</span> <span class="n">messages</span><span class="o">.</span><span class="n">properties</span>
         <span class="o">|--</span> <span class="n">zh_CN</span><span class="o">/</span>
                  <span class="o">|-</span> <span class="n">messages</span><span class="o">.</span><span class="n">properties</span>
</pre></div>
</div>
<p>A locale file contains multiple lines of <code class="docutils literal notranslate"><span class="pre">&lt;key&gt;=&lt;value&gt;</span></code>. There should
be a new line below the last property key/value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">key1</span><span class="o">=</span><span class="n">value1</span>
<span class="n">key2</span><span class="o">=</span><span class="n">value2</span>
<span class="n">key3</span><span class="o">.</span><span class="n">value</span><span class="o">=</span><span class="n">value3</span>
<span class="n">key4</span><span class="o">.</span><span class="n">innerHTML</span><span class="o">=</span><span class="n">value4</span>
</pre></div>
</div>
<p>CEP provides a JS interface named <code class="docutils literal notranslate"><span class="pre">initResourceBundle</span></code> to initialize
the locale resources. This should be called during the loading of the
extension. CEP initializes the resource bundle for the extension with
property values for the current application and UI locale. Then users
can access the resource bundle (object) to get the localized strings.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">csInterface</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>
<span class="n">csInterface</span><span class="o">.</span><span class="n">initResourceBundle</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="sharing-localization-resources-across-multiple-locales">
<h4>Sharing localization resources across multiple locales<a class="headerlink" href="#sharing-localization-resources-across-multiple-locales" title="Permalink to this headline">¶</a></h4>
<p>CEP 6.0 provided a mechanism to allow multiple locales to share the same
localization resources (<code class="docutils literal notranslate"><span class="pre">messages.properties</span></code>).</p>
<p>For example, you want <code class="docutils literal notranslate"><span class="pre">es_MX</span></code> to use the <code class="docutils literal notranslate"><span class="pre">messages.properties</span></code> for
<code class="docutils literal notranslate"><span class="pre">es_ES</span></code>. To do so, supply a file named <code class="docutils literal notranslate"><span class="pre">fallback.properties</span></code> in the
<code class="docutils literal notranslate"><span class="pre">es_MX</span></code> folder as illustrated below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">YourExtension</span><span class="o">/</span>
     <span class="o">|-</span><span class="n">csxs</span><span class="o">/</span>
     <span class="o">|-</span><span class="n">locale</span><span class="o">/</span>
         <span class="o">|--</span> <span class="n">messages</span><span class="o">.</span><span class="n">properties</span>
         <span class="o">|--</span> <span class="n">es_ES</span><span class="o">/</span>
         <span class="o">|</span>        <span class="o">|-</span> <span class="n">messages</span><span class="o">.</span><span class="n">properties</span>
         <span class="o">|--</span> <span class="n">es_MX</span><span class="o">/</span>
                  <span class="o">|-</span> <span class="n">fallback</span><span class="o">.</span><span class="n">properties</span>
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">fallback.properties</span></code> file, you specify which locale’s
localized resources you want es_MX to use, in below format</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fallback</span><span class="o">=</span><span class="n">es_ES</span>
</pre></div>
</div>
<p>Side Notes:</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">fallback.properties</span></code> file takes precedence when both
<code class="docutils literal notranslate"><span class="pre">messages.properties</span></code> and <code class="docutils literal notranslate"><span class="pre">fallback.properties</span></code> exist at the same
time.</li>
<li>If <code class="docutils literal notranslate"><span class="pre">fallback.properties</span></code> is malformed, or it specifies a
non-existent fallback locale, the messages.properties file in the
same directory will be used.</li>
</ul>
</div>
<div class="section" id="localized-menu">
<h4>Localized menu<a class="headerlink" href="#localized-menu" title="Permalink to this headline">¶</a></h4>
<p>In manifest, it supports to use locale string as menu. For example, in
ShareOnBehance’s manifest, it is using <code class="docutils literal notranslate"><span class="pre">%UI_share_on_Behance</span></code>.
<code class="docutils literal notranslate"><span class="pre">UI_share_on_Behance</span></code> is defined as <code class="docutils literal notranslate"><span class="pre">UI_share_on_Behance=xxx</span></code> in
<code class="docutils literal notranslate"><span class="pre">messages.properties</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">UI</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Type</span><span class="o">&gt;</span><span class="n">ModalDialog</span><span class="o">&lt;/</span><span class="n">Type</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Menu</span><span class="o">&gt;%</span><span class="n">UI_share_on_Behance</span><span class="o">&lt;/</span><span class="n">Menu</span><span class="o">&gt;</span>
    <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">UI</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<div class="section" id="example-1">
<h5>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>
<span class="o">//</span> <span class="n">Get</span> <span class="n">properties</span> <span class="n">according</span> <span class="n">to</span> <span class="n">current</span> <span class="n">locale</span> <span class="n">of</span> <span class="n">host</span> <span class="n">application</span><span class="o">.</span>
<span class="n">var</span> <span class="n">resourceBundle</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">initResourceBundle</span><span class="p">();</span>
<span class="o">//</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">localized</span> <span class="n">strings</span><span class="o">.</span>
<span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span><span class="n">document</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">resourceBundle</span><span class="o">.</span><span class="n">key1</span><span class="p">);</span><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="example-2">
<h5>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">data-locale</span></code> is the custom HTML element attribute and you can add to
each HTML element that you want to localize.</p>
<p>In this example, there is <code class="docutils literal notranslate"><span class="pre">key3.value=value3</span></code> in the property file. In
the HTML file, the input widget has attribute <code class="docutils literal notranslate"><span class="pre">data-locale</span></code> with
<code class="docutils literal notranslate"><span class="pre">key3</span></code>, then its value is set to <code class="docutils literal notranslate"><span class="pre">value3</span></code>.</p>
<p>In this example, there is <code class="docutils literal notranslate"><span class="pre">key4.innerHTML=value4</span></code> in the property
file. In the HTML file, the text area widget has attribute
<code class="docutils literal notranslate"><span class="pre">data-locale</span></code> with <code class="docutils literal notranslate"><span class="pre">key4</span></code>, then its <code class="docutils literal notranslate"><span class="pre">innerHTML</span></code> is set to
<code class="docutils literal notranslate"><span class="pre">value4</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
  <span class="n">var</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>

  <span class="o">//</span> <span class="n">Get</span> <span class="n">properties</span> <span class="n">according</span> <span class="n">to</span> <span class="n">current</span> <span class="n">locale</span> <span class="n">of</span> <span class="n">host</span> <span class="n">application</span><span class="o">.</span>
  <span class="n">var</span> <span class="n">resourceBundle</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">initResourceBundle</span><span class="p">();</span>

  <span class="o">//</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">localized</span> <span class="n">strings</span><span class="o">.</span>
  <span class="n">document</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">resourceBundle</span><span class="o">.</span><span class="n">key1</span><span class="p">);</span>
  <span class="n">document</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">resourceBundle</span><span class="o">.</span><span class="n">key2</span><span class="p">);</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">locale</span><span class="o">=</span><span class="s2">&quot;key3&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">textarea</span> <span class="n">rows</span><span class="o">=</span><span class="s2">&quot;10&quot;</span> <span class="n">cols</span><span class="o">=</span><span class="s2">&quot;80&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">locale</span><span class="o">=</span><span class="s2">&quot;key4&quot;</span><span class="o">&gt;&lt;/</span><span class="n">textarea</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="example-3">
<h5>Example 3<a class="headerlink" href="#example-3" title="Permalink to this headline">¶</a></h5>
<p>Use parameters <code class="docutils literal notranslate"><span class="pre">($1,</span> <span class="pre">$2,</span> <span class="pre">...)</span></code> in localized strings.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">localize</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">key</span><span class="p">){</span>
  <span class="n">var</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CSInterface</span><span class="p">();</span>
  <span class="n">var</span> <span class="n">resourceBundle</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">initResourceBundle</span><span class="p">();</span>
  <span class="n">var</span> <span class="n">localizedStr</span> <span class="o">=</span> <span class="n">resourceBundle</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">localizedStr</span><span class="p">){</span>
    <span class="n">var</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">localizedStr</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s2">&quot;$&quot;</span> <span class="o">+</span> <span class="n">index</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
      <span class="n">localizedStr</span> <span class="o">=</span> <span class="n">localizedStr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$&quot;</span> <span class="o">+</span> <span class="n">index</span><span class="p">,</span> <span class="n">arguments</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
      <span class="n">index</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">localizedStr</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="supporting-mena-locales">
<h4>Supporting MENA locales<a class="headerlink" href="#supporting-mena-locales" title="Permalink to this headline">¶</a></h4>
<p>MENA stands for “Middle East and North Africa”. Support needs to be
provided for Arabic, Hebrew, and NA French languages.</p>
<table border="1" class="docutils">
<colgroup>
<col width="82%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Language</th>
<th class="head">ISO Code</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Arabic (Middle East Enabled English Arabic)</td>
<td>en_AE</td>
</tr>
<tr class="row-odd"><td>Hebrew (Middle East Enabled English Hebrew)</td>
<td>en_IL</td>
</tr>
<tr class="row-even"><td>NA French</td>
<td>fr_MA</td>
</tr>
</tbody>
</table>
<p>If an extension needs to be loaded in host applications in MENA locales,
MENA locales must be added to the supported locale list of the extension
manifest file. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">LocaleList</span><span class="o">&gt;</span>
    <span class="o">...</span>
    <span class="o">&lt;</span><span class="n">Locale</span> <span class="n">Code</span><span class="o">=</span><span class="s2">&quot;en_AE&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Locale</span> <span class="n">Code</span><span class="o">=</span><span class="s2">&quot;en_IL&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">Locale</span> <span class="n">Code</span><span class="o">=</span><span class="s2">&quot;fr_MA&quot;</span><span class="o">/&gt;</span>
    <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">LocaleList</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="section" id="extension-localization-for-mena-locales">
<h5>Extension localization for MENA locales<a class="headerlink" href="#extension-localization-for-mena-locales" title="Permalink to this headline">¶</a></h5>
<p>Suppose your extension has this directory layout</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Extension</span><span class="o">/</span>
         <span class="o">|-</span><span class="n">csxs</span><span class="o">/</span>
         <span class="o">|-</span><span class="n">locale</span><span class="o">/</span>                                <span class="o">&lt;--</span> <span class="n">Directory</span> <span class="k">for</span> <span class="n">localized</span> <span class="n">resources</span>
                 <span class="o">|--</span> <span class="n">messages</span><span class="o">.</span><span class="n">properties</span>          <span class="o">&lt;--</span> <span class="n">The</span> <span class="n">one</span> <span class="n">to</span> <span class="n">fallback</span> <span class="n">to</span> <span class="k">if</span> <span class="n">no</span> <span class="n">localized</span> <span class="n">resources</span> <span class="ow">is</span> <span class="n">provided</span> <span class="k">for</span> <span class="n">a</span> <span class="n">locale</span>
                 <span class="o">|--</span> <span class="n">fr_FR</span><span class="o">/</span>
                 <span class="o">|</span>        <span class="o">|-</span> <span class="n">messages</span><span class="o">.</span><span class="n">properties</span>
                 <span class="o">|--</span> <span class="n">en_GB</span><span class="o">/</span>
                          <span class="o">|-</span> <span class="n">messages</span><span class="o">.</span><span class="n">properties</span>
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">CSInterface.initResourceBundle()</span></code> is called, CEP uses the app UI
locale (not app locale) reported by PP to load localized resources. If
there is no localized resources for an app UI locale, for example
<code class="docutils literal notranslate"><span class="pre">fr_MA</span></code>, then CEP will fall back to use <code class="docutils literal notranslate"><span class="pre">messages.properties</span></code>
located under the <code class="docutils literal notranslate"><span class="pre">locale</span></code> folder.</p>
<p>With MENA feature, point products map <code class="docutils literal notranslate"><span class="pre">en_AE/en_IL</span></code> to <code class="docutils literal notranslate"><span class="pre">en_US</span></code> and
<code class="docutils literal notranslate"><span class="pre">fr_MA</span></code> to <code class="docutils literal notranslate"><span class="pre">fr_FR</span></code> for app UI locale. In this case, for <code class="docutils literal notranslate"><span class="pre">en_AE</span></code>
and <code class="docutils literal notranslate"><span class="pre">en_IL</span></code> build of point product, <code class="docutils literal notranslate"><span class="pre">en_US</span></code> resources will be used
if provided and for <code class="docutils literal notranslate"><span class="pre">fr_MA</span></code> build of point product, <code class="docutils literal notranslate"><span class="pre">fr_FR</span></code>
resources will be used if provided. What extension team needs to do in
this case is to provide <code class="docutils literal notranslate"><span class="pre">en_US</span></code> version of resources for
<code class="docutils literal notranslate"><span class="pre">en_AE/en_IL</span></code> and <code class="docutils literal notranslate"><span class="pre">fr_FR</span></code> version of resources for <code class="docutils literal notranslate"><span class="pre">fr_MA</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="video-audio-playback">
<h3>Video/Audio Playback<a class="headerlink" href="#video-audio-playback" title="Permalink to this headline">¶</a></h3>
<p>CEP 5.0 supports playing video and audio encoded in below formats.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="15%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Format</th>
<th class="head">MIME-Type</th>
<th class="head">Misc.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MP4</td>
<td>video/mp4</td>
<td>MPEG 4 files with H.264 video codec and AAC audio codec</td>
</tr>
<tr class="row-odd"><td>Ogg</td>
<td>video/ogg</td>
<td>Ogg files with Theora video codec and Vorbis audio codec</td>
</tr>
<tr class="row-even"><td>mp3</td>
<td>audio/mpeg</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>Here is an example of playing video in your extension:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">video</span> <span class="n">poster</span><span class="o">=</span><span class="s2">&quot;http://www.html5rocks.com/en/tutorials/video/basics/star.png&quot;</span> <span class="n">controls</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">source</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://www.html5rocks.com/en/tutorials/video/basics/Chrome_ImF.mp4&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;&#39;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">video</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>One thing to note is that because HTML extensions are hosted in
integrating application’s windows, video cannot be played in full-screen
mode.</p>
</div>
<div class="section" id="webrtc">
<h3>WebRTC<a class="headerlink" href="#webrtc" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.webrtc.org/">WebRTC</a> is targeting to serve stream audio,
video capture, like online video conference. WebRTC is not enabled by
default. To enable it, the schema below need to be added in manifest
file. For details, refer to Customize CEF command parameters.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">CEFCommandLine</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;--</span><span class="n">enable</span><span class="o">-</span><span class="n">media</span><span class="o">-</span><span class="n">stream</span><span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">CEFCommandLine</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For WebRTC related development, CEP runtime just keeps the same
experiences as the usage in Chrome. Please refer to
<a class="reference external" href="http://www.html5rocks.com/en/tutorials/getusermedia/intro/">samples</a>
for the implementation.</p>
</div>
<div class="section" id="scroll-bar-tips">
<h3>Scroll bar tips<a class="headerlink" href="#scroll-bar-tips" title="Permalink to this headline">¶</a></h3>
<p>On Mac, scroll bars of panel are hidden by OS (since Lion by design). It
can be always shown by settings as below.</p>
<ol class="arabic simple">
<li>Click the Apple menu at the top-left of the screen, then select
System Preferences.</li>
<li>Next, select the General preferences pane; it’s the very first one,
up at the top.</li>
<li>Under the “Show scroll bars” heading, you’ll find three options:
“Automatically based on input device,” “When scrolling,” and
“Always.” Chose “Always.”</li>
</ol>
</div>
<div class="section" id="invisible-html-extensions">
<h3>Invisible HTML Extensions<a class="headerlink" href="#invisible-html-extensions" title="Permalink to this headline">¶</a></h3>
<p>An HTML extension can be invisible during its whole life cycle. This
means</p>
<ul class="simple">
<li>It always runs in the background</li>
<li>It is never visible</li>
</ul>
<p>To make an HTML extension invisible</p>
<ul class="simple">
<li>Set extension manifest version to “5.0” or higher.</li>
<li>Specify its window type as ‘Custom’ in the manifest file.</li>
<li>Set <code class="docutils literal notranslate"><span class="pre">&lt;AutoVisible&gt;</span></code> to false in the manifest file.</li>
<li>If you do not want the extension to appear in the Window-&gt;Extensions
menu, do not add the <code class="docutils literal notranslate"><span class="pre">&lt;Menu&gt;</span></code> tag.</li>
<li>If you want the extension to start on specific types of events,
specify those events using <code class="docutils literal notranslate"><span class="pre">&lt;StartOn&gt;</span></code> tag.</li>
</ul>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
&lt;ExtensionManifest xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; ExtensionBundleId=&quot;IamInvisible&quot; ExtensionBundleVersion=&quot;1.0&quot; Version=&quot;5.0&quot;&gt;
    &lt;ExtensionList&gt;
        &lt;Extension Id=&quot;IamInvisible&quot; Version=&quot;1.0&quot;/&gt;
    &lt;/ExtensionList&gt;
    &lt;ExecutionEnvironment&gt;
        &lt;HostList&gt;
            &lt;Host Name=&quot;PHXS&quot; Version=&quot;13.0&quot;/&gt;
        &lt;/HostList&gt;
        &lt;LocaleList&gt;
            &lt;Locale Code=&quot;All&quot;/&gt;
        &lt;/LocaleList&gt;
        &lt;RequiredRuntimeList&gt;
            &lt;RequiredRuntime Name=&quot;CSXS&quot; Version=&quot;5.0&quot;/&gt;
        &lt;/RequiredRuntimeList&gt;
    &lt;/ExecutionEnvironment&gt;
    &lt;DispatchInfoList&gt;
        &lt;Extension Id=&quot;IamInvisible&quot;&gt;
            &lt;DispatchInfo&gt;
                &lt;Resources&gt;
                    &lt;MainPath&gt;./html/index.html&lt;/MainPath&gt;
                &lt;/Resources&gt;
                &lt;Lifecycle&gt;
                    &lt;AutoVisible&gt;false&lt;/AutoVisible&gt;
                    &lt;StartOn&gt;
                        &lt;!-- Photoshop dispatches this event on startup --&gt;
                        &lt;Event&gt;applicationActivate&lt;/Event&gt;
                        &lt;!-- Premiere Pro dispatches this event on startup --&gt;
                        &lt;Event&gt;com.adobe.csxs.events.ApplicationActivate&lt;/Event&gt;
                        &lt;!-- You can add more events --&gt;
                        &lt;Event&gt;another_event&lt;/Event&gt;
                    &lt;/StartOn&gt;
                &lt;/Lifecycle&gt;
                &lt;UI&gt;
                    &lt;Type&gt;Custom&lt;/Type&gt;
                    &lt;Geometry&gt;
                        &lt;Size&gt;
                            &lt;Height&gt;1&lt;/Height&gt;
                            &lt;Width&gt;1&lt;/Width&gt;
                        &lt;/Size&gt;
                    &lt;/Geometry&gt;
                &lt;/UI&gt;
            &lt;/DispatchInfo&gt;
        &lt;/Extension&gt;
    &lt;/DispatchInfoList&gt;
&lt;/ExtensionManifest&gt;
</pre></div>
</div>
<p>One important thing to note is that not all host applications support
Invisible HTML Extension. See table below for more information:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Point Product</th>
<th class="head">Supports Invisible
Extension</th>
<th class="head">Misc.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Photoshop</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Premiere Pro</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Prelude</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Animate (Flash Pro)</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Audition</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>InDesign</td>
<td>No</td>
<td>Doesn’t work at all
because InDesign
doesn’t support
‘Custom’ window type.</td>
</tr>
<tr class="row-even"><td>InCopy</td>
<td>No</td>
<td>Doesn’t work at all
because InCopy
doesn’t support
‘Custom’ window type.</td>
</tr>
<tr class="row-odd"><td>Illustrator</td>
<td>Yes</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="customize-cef-command-line-parameters">
<h3>Customize CEF Command Line Parameters<a class="headerlink" href="#customize-cef-command-line-parameters" title="Permalink to this headline">¶</a></h3>
<p>Chromium/CEF command line parameters can be passed to CEPHtmlEngine,
like –enable-media-stream. Available Chromium command line
<a class="reference external" href="http://peter.sh/experiments/chromium-command-line-switches/">parameters</a>.</p>
<p>CEP filters out some parameters due to various reasons:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">What is it filtered out?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>–remote-debugging-port</td>
<td>This could overwrite the one in
.debug file. Filter out to avoid
conflict.</td>
</tr>
<tr class="row-odd"><td>–ignore-certificate-errors</td>
<td>This ignores SSL certificate
errors. It is a security concern
to ignore invalid server
certificate, which allows
extensions to load files from
malicious sites.</td>
</tr>
</tbody>
</table>
<p>All other parameters are passed to underlying CEF. It is up to CEF to
decide whether a parameter is supported and what is the behavior.</p>
<div class="section" id="how-to-use-cef-command-line-parameters">
<h4>How to use CEF command line parameters<a class="headerlink" href="#how-to-use-cef-command-line-parameters" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Add
<code class="docutils literal notranslate"><span class="pre">&lt;CEFCommandLine&gt;&lt;Parameter&gt;--param1&lt;Parameter/&gt;</span> <span class="pre">...</span> <span class="pre">&lt;/CEFCommandLine&gt;</span></code>
in manifest.</li>
<li>For <code class="docutils literal notranslate"><span class="pre">key=value</span></code> parameter, add
<code class="docutils literal notranslate"><span class="pre">&lt;CEFCommandLine&gt;&lt;Parameter&gt;--param1=value1&lt;Parameter/&gt;</span> <span class="pre">...</span> <span class="pre">&lt;/CEFCommandLine&gt;</span></code>
in manifest.</li>
</ul>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
&lt;ExtensionManifest xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; ExtensionBundleId=&quot;xx.yy.zz&quot; ExtensionBundleVersion=&quot;1.0&quot; Version=&quot;5.0&quot;&gt;
    &lt;ExtensionList&gt;
        &lt;Extension Id=&quot;xx.yy.zz&quot; Version=&quot;1.0&quot;/&gt;
    &lt;/ExtensionList&gt;
    &lt;ExecutionEnvironment&gt;
        &lt;HostList&gt;
            &lt;Host Name=&quot;PHXS&quot; Version=&quot;13.0&quot;/&gt;
            &lt;Host Name=&quot;PPRO&quot; Version=&quot;6.0&quot;/&gt;
        &lt;/HostList&gt;
        &lt;LocaleList&gt;
            &lt;Locale Code=&quot;All&quot;/&gt;
        &lt;/LocaleList&gt;
        &lt;RequiredRuntimeList&gt;
            &lt;RequiredRuntime Name=&quot;CSXS&quot; Version=&quot;5.0&quot;/&gt;
        &lt;/RequiredRuntimeList&gt;
    &lt;/ExecutionEnvironment&gt;
    &lt;DispatchInfoList&gt;
        &lt;Extension Id=&quot;xx.yy.zz&quot;&gt;
            &lt;DispatchInfo&gt;
                &lt;Resources&gt;
                    &lt;MainPath&gt;./html/index.html&lt;/MainPath&gt;
                    &lt;CEFCommandLine&gt;
                        &lt;Parameter&gt;--enable-media-stream&lt;/Parameter&gt;
                    &lt;/CEFCommandLine&gt;
                &lt;/Resources&gt;
                ...
            &lt;/DispatchInfo&gt;
        &lt;/Extension&gt;
    &lt;/DispatchInfoList&gt;
&lt;/ExtensionManifest&gt;
</pre></div>
</div>
</div>
<div class="section" id="commonly-used-cef-command-parameters">
<h4>Commonly used CEF command parameters<a class="headerlink" href="#commonly-used-cef-command-parameters" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>–enable-media-stream</td>
<td>Enable media (WebRTC audio/video)
streaming.</td>
</tr>
<tr class="row-odd"><td>–enable-speech-input</td>
<td>Enable speech input
(x-webkit-speech).</td>
</tr>
<tr class="row-even"><td>–persist-session-cookies</td>
<td>Persist session cookies.</td>
</tr>
<tr class="row-odd"><td>–disable-image-loading</td>
<td>Disable loading of images from
the network. A cached image will
still be rendered if requested.</td>
</tr>
<tr class="row-even"><td>–disable-javascript-open-windows</td>
<td>Disable opening of windows via
JavaScript.</td>
</tr>
<tr class="row-odd"><td>–disable-javascript-close-windows</td>
<td>Disable closing of windows via
JavaScript.</td>
</tr>
<tr class="row-even"><td>–disable-javascript-access-clipbo
ard</td>
<td>Disable clipboard access via
JavaScript.</td>
</tr>
<tr class="row-odd"><td>–enable-caret-browsing</td>
<td>Enable caret browsing.</td>
</tr>
<tr class="row-even"><td>–proxy-auto-detect</td>
<td>This tells Chrome to try and
automatically detect your proxy
configuration. See more info at
<a class="reference external" href="http://www.chromium.org/developer">http://www.chromium.org/developer</a>
s/design-documents/network-settin
gs.</td>
</tr>
<tr class="row-odd"><td>–user-agent</td>
<td>A string used to override the
default user agent with a custom
one.</td>
</tr>
<tr class="row-even"><td>–disable-application-cache</td>
<td>Disable the ApplicationCache.</td>
</tr>
<tr class="row-odd"><td>–enable-nodejs</td>
<td>Enable Node.js APIs in
extensions. Supported since CEP
6.1.</td>
</tr>
<tr class="row-even"><td>–disable-pinch</td>
<td>Disable compositor-accelerated
touch-screen pinch gestures.</td>
</tr>
<tr class="row-odd"><td>–mixed-conext</td>
<td>Enable the “mixed context” mode.
Supported since CEP 7.0.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="html-extension-persistent">
<h3>HTML Extension Persistent<a class="headerlink" href="#html-extension-persistent" title="Permalink to this headline">¶</a></h3>
<p>The purpose of persistent is to force not reload HTML extension when it
is closed or hidden. Photoshop has provided persistent since the version
14.2. Please note that, this feature is product specific and may not be
available in few host applications.</p>
<p>InDesign and InCopy support persistent feature from version 13.1.
Following are the specific event names to be used: Indesign and Incopy:
com.adobe.InDesignPersistent com.adobe.InDesignUnPersistent</p>
<p>To make an HTML extension persistent in Photoshop</p>
<ul class="simple">
<li>Upgrade Photoshop version to 14.2 or later</li>
<li>Dispatch the event <code class="docutils literal notranslate"><span class="pre">com.adobe.PhotoshopPersistent</span></code> from HTML
extension to Photoshop to request persistent</li>
</ul>
<p>Sample code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>var Persistent = function(inOn){
  if(inOn){
    var event = new CSEvent(&quot;com.adobe.PhotoshopPersistent&quot;, &quot;APPLICATION&quot;); //Photoshop
    //var event = new CSEvent(&quot;com.adobe.InDesignPersistent&quot;, &quot;APPLICATION&quot;); //Indesign or Incopy
  } else {
    var event = new CSEvent(&quot;com.adobe.PhotoshopUnPersistent&quot;, &quot;APPLICATION&quot;); //Photoshop
    //var event = new CSEvent(&quot;com.adobe.InDesignUnPersistent&quot;, &quot;APPLICATION&quot;); //Indesign or Incopy
  }
  event.extensionId = &lt;extension id as per manifest definition&gt;;
  csInterface.dispatchEvent(event);
 }

Persistent(true); //persistent to prevent extension from unloading
…
Persistent(false); //unpersistent
</pre></div>
</div>
</div>
<div class="section" id="open-url-link-in-default-browser">
<h3>Open URL link in default browser<a class="headerlink" href="#open-url-link-in-default-browser" title="Permalink to this headline">¶</a></h3>
<p>In HTML extension, URL link could be opened in the default browser by
calling
<code class="docutils literal notranslate"><span class="pre">window.cep.util.openURLInDefaultBrowser(‘http://example.com')</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">button</span> <span class="n">onclick</span><span class="o">=</span><span class="s2">&quot;window.cep.util.openURLInDefaultBrowser(&#39;http://www.adobe.com&#39;)&quot;</span><span class="o">&gt;</span><span class="n">Open</span> <span class="n">browser</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="interaction-between-extension-and-point-product-during-extension-unload">
<h3>Interaction between extension and point product during extension unload<a class="headerlink" href="#interaction-between-extension-and-point-product-during-extension-unload" title="Permalink to this headline">¶</a></h3>
<p>When an extension is about to be unloaded, the communication channel
between extension and point product has been torn down, so there’s no
easy way for point product to get the extension-related information such
as the extension’s status.</p>
<p>To fulfill this functionality, the cooperation between extension and
point product is needed.</p>
<p>From extension’s side, a JavaScript function
<code class="docutils literal notranslate"><span class="pre">registerExtensionUnloadCallback</span></code> is provided to register its callback
function. The definition can be found at
<a class="reference external" href="https://github.com/Adobe-CEP/CEP-Resources/blob/CEP8/CEP_8.x/CEPEngine_extensions.js">https://github.com/Adobe-CEP/CEP-Resources/blob/CEP8/CEP_8.x/CEPEngine_extensions.js</a>.
There’re some limitations as below:</p>
<ul class="simple">
<li>If registerExtensionUnloadCallback is called more than once, the last
callback function that’s successfully registered will be used.</li>
<li>The callback function must be context-independent and it is executed
in the mainframe’s context.</li>
</ul>
<p>Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">registerExtensionUnloadCallback</span><span class="p">(</span><span class="n">function</span><span class="p">(){</span>
<span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="s2">&quot;D:</span><span class="se">\\</span><span class="s2">1.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>From point product’s side,
<code class="docutils literal notranslate"><span class="pre">csxs::event::EVENT_TYPE_CSXS_EXTENSION_UNLOADED</span> <span class="pre">(&quot;com.adobe.csxs.events.ExtensionUnloaded&quot;)</span></code>
is dispatched. When point product receives the event, it can read the
file written by extension to get the extension-related information.</p>
<p>Since the execution in the extension and the point product is in
parallel, the point product needs to take care of the order.</p>
<p>The above method does not work due to the multi-process architecture in
CEF 3.</p>
</div>
<div class="section" id="using-node-js-apis-cep-6-0-and-prior-releases">
<h3>Using Node.js APIs (CEP 6.0 and prior releases)<a class="headerlink" href="#using-node-js-apis-cep-6-0-and-prior-releases" title="Permalink to this headline">¶</a></h3>
<div class="section" id="node-js-support">
<h4>Node.js Support<a class="headerlink" href="#node-js-support" title="Permalink to this headline">¶</a></h4>
<p>One of the most prominent feature in CEP 5.0 is allowing Node.js APIs to
be used in HTML extensions. Most of the built-in APIs in Node.js version
0.8.22 are available to HTML extensions, with the below exceptions:</p>
<ul class="simple">
<li>Cluster APIs are not supported.</li>
<li>Console APIs are not supported on Windows.</li>
</ul>
<p>Other things to note:</p>
<ul class="simple">
<li>CEP injects following symbols into the root HTML DOM:<ul>
<li><strong>global, GLOBAL, root</strong> - same with the window object</li>
<li><strong>Buffer</strong> - node’s Buffer class</li>
<li><strong>process</strong> - node’s process class</li>
<li><strong>require</strong> - the magic function that bring you node API</li>
<li><strong>module</strong> - in node the main script is a special module, this is
for the compatibility</li>
</ul>
</li>
<li>Conflicts with Web-Based Require Function<ul>
<li>If your app uses libraries like <code class="docutils literal notranslate"><span class="pre">RequireJS</span></code> that inserts a
require function into DOM, you should consider renaming CEP’s
require function to something else before migrating.</li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span><span class="n">windows</span><span class="o">.</span><span class="n">nodeRequire</span><span class="o">=</span><span class="n">window</span><span class="o">.</span><span class="n">require</span> <span class="o">&amp;&amp;</span> <span class="n">window</span><span class="o">.</span><span class="n">require</span><span class="o">=</span><span class="n">undefined</span><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;your/require/js/file.js&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Conflicts with Web-Based module Function<ul>
<li>If your app uses <code class="docutils literal notranslate"><span class="pre">JQuery</span></code> that is trying to register itself as
<code class="docutils literal notranslate"><span class="pre">nodejs</span></code> plugin, then you will have to add the script below
inside script tag to define window.module as undefined.</li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span><span class="n">window</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="n">undefined</span><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Disable Node.js APIs in iframe<ul>
<li>Because of security consideration, CEP provides an option to
disable Node.js APIs in iframe. To do so, add a
<code class="docutils literal notranslate"><span class="pre">nodejs-disabled=&quot;true&quot;</span></code> attribute to iframe tag. For example:</li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">iframe</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;xxx&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;xxxxx&quot;</span> <span class="n">nodejs</span><span class="o">-</span><span class="n">disabled</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>Forcing the environment implementation. If you are using
<code class="docutils literal notranslate"><span class="pre">RequireJS</span></code>, and the text plugin tries to detect what environment
is available for loading text resources, <code class="docutils literal notranslate"><span class="pre">Node</span></code>,
<code class="docutils literal notranslate"><span class="pre">XMLHttpRequest</span> <span class="pre">(XHR)</span></code> or <code class="docutils literal notranslate"><span class="pre">Rhino</span></code>, but sometimes the <code class="docutils literal notranslate"><span class="pre">Node</span></code> or
<code class="docutils literal notranslate"><span class="pre">Rhino</span></code> environment may have loaded a library that introduces an
<code class="docutils literal notranslate"><span class="pre">XHR</span></code> implementation. You can force the environment implementation
to use by passing an <code class="docutils literal notranslate"><span class="pre">&quot;env&quot;</span></code> module config to the plugin:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">requirejs</span><span class="o">.</span><span class="n">config</span><span class="p">({</span>
   <span class="n">config</span><span class="p">:</span> <span class="p">{</span>
   <span class="n">text</span><span class="p">:</span> <span class="p">{</span>
      <span class="o">//</span><span class="n">Valid</span> <span class="n">values</span> <span class="n">are</span> <span class="s1">&#39;node&#39;</span><span class="p">,</span> <span class="s1">&#39;xhr&#39;</span><span class="p">,</span> <span class="ow">or</span> <span class="s1">&#39;rhino&#39;</span>
       <span class="n">env</span><span class="p">:</span> <span class="s1">&#39;rhino&#39;</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="node-js-modules">
<h4>Node.js Modules<a class="headerlink" href="#node-js-modules" title="Permalink to this headline">¶</a></h4>
<div class="section" id="javascript-modules">
<h5>JavaScript Modules<a class="headerlink" href="#javascript-modules" title="Permalink to this headline">¶</a></h5>
<p>All third-party node JavaScript modules are supported. The root search
path of third-party modules is the directory which contains your HTML
file. For example, when you do require in
<code class="docutils literal notranslate"><span class="pre">file:///your_extension/index.html</span></code>, CEP will lookup modules under
<code class="docutils literal notranslate"><span class="pre">file:///your_extension/node_modules</span></code>, this rule is exactly the same
with upstream node.</p>
</div>
<div class="section" id="native-modules">
<h5>Native Modules<a class="headerlink" href="#native-modules" title="Permalink to this headline">¶</a></h5>
<p>Node.js native modules are not directly supported since CEP is using a
different V8 version from the official node.</p>
</div>
</div>
<div class="section" id="samples">
<h4>Samples<a class="headerlink" href="#samples" title="Permalink to this headline">¶</a></h4>
<div class="section" id="use-environment-variables">
<h5>Use Environment Variables<a class="headerlink" href="#use-environment-variables" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">process</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">ENV_VARIABLE</span> <span class="o">//</span> <span class="n">ENV_VARIABLE</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">variable</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">access</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="use-node-js-to-download-files">
<h5>Use Node.js to download files<a class="headerlink" href="#use-node-js-to-download-files" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><a class="reference external" href="http://www.hacksparrow.com/using-node-js-to-download-files.html">http://www.hacksparrow.com/using-node-js-to-download-files.html</a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="using-node-js-apis-cep-6-1">
<h3>Using Node.js APIs (CEP 6.1)<a class="headerlink" href="#using-node-js-apis-cep-6-1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="node-js-support-1">
<span id="id1"></span><h4>Node.js Support<a class="headerlink" href="#node-js-support-1" title="Permalink to this headline">¶</a></h4>
<p>CEP 6.1 upgraded its HTML engine to CEF 2272 (based on Chromium
41.0.2272.104) with IO.js version 1.2.0 integrated.</p>
<p>Other things to note:</p>
<ul class="simple">
<li>Node.js APIs are <strong>disabled by default</strong><ul>
<li>Due to security consideration, node.js APIs are disabled by
default (prior to CEP 6.1, they were enabled by default) both on
the extension level and iFrame level.</li>
</ul>
</li>
</ul>
<p>To enable Node.js APIs:</p>
<ul class="simple">
<li>Set <code class="docutils literal notranslate"><span class="pre">ExtensionManifest</span></code> version and <code class="docutils literal notranslate"><span class="pre">RequiredRuntime</span></code> version 5.0
or higher.</li>
<li>Specify <code class="docutils literal notranslate"><span class="pre">--enable-nodejs</span></code> in extension manifest. See section
Customize CEF Command Line Parameters for details.</li>
<li>To use <code class="docutils literal notranslate"><span class="pre">Node.js</span></code> APIs in IFrames, add property <code class="docutils literal notranslate"><span class="pre">enable-nodejs</span></code> to
it and to all its ancestor iFrames. If any of its ancestors don’t
have this property specified, <code class="docutils literal notranslate"><span class="pre">Node.js</span></code> APIs won’t work</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">iframe</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;xxx&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;xxxxx&quot;</span> <span class="n">enable</span><span class="o">-</span><span class="n">nodejs</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>The old <code class="docutils literal notranslate"><span class="pre">nodejs-disabled</span></code> CEF command line parameter and iFrame
property are no longer supported and ignored by the new HTML engine.</li>
<li>Node context and Browser context<ul>
<li>The way <code class="docutils literal notranslate"><span class="pre">io.js</span></code> was integrated into CEF introduced two types of
JavaScript contexts, one for browser, the other for <code class="docutils literal notranslate"><span class="pre">io.js</span></code>.
Global objects created in HTML pages are in browser context, while
<code class="docutils literal notranslate"><span class="pre">required</span></code> js files run in <code class="docutils literal notranslate"><span class="pre">io.js</span></code> context. These two contexts
don’t have direct access to each other’s data. To share data, pass
reference to objects between the two contexts:<ul>
<li>Accessing objects in <code class="docutils literal notranslate"><span class="pre">io.js</span></code> context from browser context -
For example, in browser context,
<code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">backbone</span> <span class="pre">=</span> <span class="pre">require('backbone');</span></code> executes the backbone
module’s code and then pass the result object to browser
context.</li>
<li>Accessing objects in browser context from <code class="docutils literal notranslate"><span class="pre">io.js</span></code> context -
Browser context’s <code class="docutils literal notranslate"><span class="pre">window</span></code> global object is injected to
<code class="docutils literal notranslate"><span class="pre">io.js</span></code> context, providing a way to access objects in browser
context from <code class="docutils literal notranslate"><span class="pre">io.js</span></code> context. For example, if you want to
access a global object named <code class="docutils literal notranslate"><span class="pre">localeStrings</span></code> defined in
browser context from your <code class="docutils literal notranslate"><span class="pre">io.js</span></code> module, use
<code class="docutils literal notranslate"><span class="pre">window.localStrings</span></code> in your <code class="docutils literal notranslate"><span class="pre">io.js</span></code> module.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="using-node-js-apis-cep-7-0">
<h3>Using Node.js APIs (CEP 7.0)<a class="headerlink" href="#using-node-js-apis-cep-7-0" title="Permalink to this headline">¶</a></h3>
<p>In addition to the existing <code class="docutils literal notranslate"><span class="pre">Node.js</span></code> support in CEP 6.1, CEP 7.0
provided a new <code class="docutils literal notranslate"><span class="pre">mixed</span> <span class="pre">context</span></code> <code class="docutils literal notranslate"><span class="pre">Node.js</span></code> mode. Unlike the
<code class="docutils literal notranslate"><span class="pre">separate</span> <span class="pre">context</span></code> mode in CEP 6.1 where a <code class="docutils literal notranslate"><span class="pre">required</span></code> node module is
in a separate JavaScript context, a <code class="docutils literal notranslate"><span class="pre">required</span></code> node module and the
JavaScript code that <code class="docutils literal notranslate"><span class="pre">requires</span></code> it are in the same context in the new
<code class="docutils literal notranslate"><span class="pre">mixed</span> <span class="pre">context</span></code> mode, eliminating all the inconveniences in the old
<code class="docutils literal notranslate"><span class="pre">separate</span> <span class="pre">context</span></code> mode.</p>
<p>This mode is disabled by default. To enable it, add command line
parameter <code class="docutils literal notranslate"><span class="pre">--mixed-context</span></code> to your extension manifest.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;--</span><span class="n">mixed</span><span class="o">-</span><span class="n">context</span><span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="limitation-of-cep-process-stdout-stderr">
<h3>Limitation of cep.process.stdout/stderr<a class="headerlink" href="#limitation-of-cep-process-stdout-stderr" title="Permalink to this headline">¶</a></h3>
<p>There is a known limitation of <code class="docutils literal notranslate"><span class="pre">cep.process.stdout/stderr</span></code> which is
targeting to capture one time of <code class="docutils literal notranslate"><span class="pre">stdout/stderr</span></code> output.</p>
<p>For applications that has not integrated CEP 5, there are two
workarounds suggested as the following.</p>
<ul class="simple">
<li>Embed cep.process.stdout/stderr:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">getSTDOutput</span> <span class="o">=</span> <span class="n">function</span><span class="p">(){</span>
  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;getSTDOutput&quot;</span><span class="p">);</span>
  <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">output</span><span class="p">){</span>
  <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">output</span><span class="p">);</span>
  <span class="o">//</span> <span class="n">your</span> <span class="n">code</span> <span class="ow">is</span> <span class="n">here</span>
  <span class="p">});</span>

  <span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">isRunning</span><span class="p">(</span><span class="n">pid</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">data</span> <span class="o">===</span> <span class="n">true</span><span class="p">){</span>
    <span class="n">setTimeout</span><span class="p">(</span><span class="n">getSTDOutput</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>Join all stdout output as one, like below</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">str1</span> <span class="o">=</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">str2</span> <span class="o">=</span> <span class="s1">&#39;12345&#39;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">str3</span> <span class="o">=</span> <span class="s1">&#39;gghhtt&#39;</span><span class="p">;</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">str1</span> <span class="o">+</span> <span class="n">str2</span> <span class="o">+</span> <span class="n">str3</span><span class="p">);</span>
</pre></div>
</div>
<p>An example on how to get curl downloading progress through stderr:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
        <span class="n">var</span> <span class="n">downloadPid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">function</span> <span class="n">getStdErrOutput</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">stderr</span><span class="p">(</span><span class="n">downloadPid</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">progress</span><span class="p">)</span> <span class="p">{</span>
                                      <span class="n">var</span> <span class="n">keys</span> <span class="o">=</span> <span class="n">progress</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">new</span> <span class="n">RegExp</span><span class="p">(</span><span class="s1">&#39;[# ]&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">));</span>
                                      <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">keys</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
                                        <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
                                         <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                                        <span class="p">}</span>
                                      <span class="p">}</span>
                                    <span class="p">});</span>
            <span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">isRunning</span><span class="p">(</span><span class="n">downloadPid</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="n">true</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">setTimeout</span><span class="p">(</span><span class="n">getStdErrOutput</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">var</span> <span class="n">doDownload</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">var</span> <span class="n">qURL</span> <span class="o">=</span> <span class="s1">&#39;http://code.jquery.com/jquery-1.11.0.min.js&#39;</span><span class="p">;</span>
            <span class="n">var</span> <span class="n">dest</span> <span class="o">=</span> <span class="s1">&#39;/tmp/test.js&#39;</span><span class="p">;</span>
            <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;ext download (curl) &quot;</span> <span class="o">+</span> <span class="n">qURL</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">dest</span><span class="p">);</span>
            <span class="n">var</span> <span class="n">result</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">cep</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">createProcess</span><span class="p">(</span><span class="s1">&#39;/usr/bin/curl&#39;</span><span class="p">,</span> <span class="n">qURL</span><span class="p">,</span> <span class="s1">&#39;-#&#39;</span><span class="p">,</span> <span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="p">);</span>
            <span class="n">downloadPid</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">data</span><span class="p">;</span>
            <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;download pid is &quot;</span> <span class="o">+</span> <span class="n">downloadPid</span><span class="p">);</span>
            <span class="n">getStdErrOutput</span><span class="p">();</span>
        <span class="p">};</span>

        <span class="n">doDownload</span><span class="p">();</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Since CEP 5, Node.js is integrated into CEP runtime and users could
invoke the standard APIs of <code class="docutils literal notranslate"><span class="pre">Node.js</span></code> in extension directly. For
applications that has integrated CEP 5, refer to
<a class="reference external" href="http://nodejs.org/api/process.html">http://nodejs.org/api/process.html</a> on how to use the global process
object in <code class="docutils literal notranslate"><span class="pre">Node.js</span></code>.</p>
</div>
<div class="section" id="adobe-exchange">
<h3>Adobe Exchange<a class="headerlink" href="#adobe-exchange" title="Permalink to this headline">¶</a></h3>
<p>Sample extension is at
<a class="reference external" href="https://github.com/Adobe-CEP/Samples/tree/master/ExchangeExample">https://github.com/Adobe-CEP/Samples/tree/master/ExchangeExample</a>.</p>
</div>
</div>
<div class="section" id="other-javascript-information">
<h2>Other JavaScript Information<a class="headerlink" href="#other-javascript-information" title="Permalink to this headline">¶</a></h2>
<div class="section" id="load-multiple-jsx-files">
<h3>Load Multiple JSX files<a class="headerlink" href="#load-multiple-jsx-files" title="Permalink to this headline">¶</a></h3>
<p>JSX files normally define some functions and objects which are intended
to be executed in host application’s ExtendScript environment.</p>
<p>There are two approaches for HTML extension to trigger JSX files to be
loaded in host application’s ExtendScript.</p>
<ul class="simple">
<li>Define <code class="docutils literal notranslate"><span class="pre">&lt;ScriptPath&gt;</span></code> node in <code class="docutils literal notranslate"><span class="pre">manifest.xml</span></code>, and the value of
the node is the relative path for the JSX file. For example:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Extension Id=&quot;com.adobe.CEPHTMLTEST.Panel1&quot;&gt;
&lt;DispatchInfo&gt;
       &lt;Resources&gt;
           &lt;MainPath&gt;./html/index.html&lt;/MainPath&gt;
            &lt;CEFCommandLine&gt;
                &lt;Parameter&gt;--enable-speech-input&lt;/Parameter&gt;
                &lt;Parameter&gt;--enable-media-stream&lt;/Parameter&gt;
            &lt;/CEFCommandLine&gt;
                &lt;ScriptPath&gt;./jsx/example.jsx&lt;/ScriptPath&gt; &lt;!-- ExtensionRootPath/jsx/example.jsx --&gt;
            &lt;/Resources&gt;
        ...........................
    &lt;/DispatchInfo&gt;
&lt;/Extension&gt;
</pre></div>
</div>
<ul class="simple">
<li>HTML extension uses CEP JavaScript API <code class="docutils literal notranslate"><span class="pre">evalScript</span></code> with the script
<code class="docutils literal notranslate"><span class="pre">$.evalFile(jsxFile)</span></code> to trigger JSX files to get loaded in host
application’s ExtendScript. Developers may need more script code to
determine the path of <code class="docutils literal notranslate"><span class="pre">jsxFile</span></code> before the <code class="docutils literal notranslate"><span class="pre">evalScript</span></code> call. For
example, they may refer to <code class="docutils literal notranslate"><span class="pre">$.fileName</span></code> to find out the path and
the value of <code class="docutils literal notranslate"><span class="pre">$.fileName</span></code> should be the currently executed <code class="docutils literal notranslate"><span class="pre">JSX</span></code>
file path. Here is an example:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>var extensionPath = $.fileName.split(&#39;/&#39;).slice(0, -1).join(&#39;/&#39;) + &#39;/&#39;;  // The value of $.fileName should be ExtensionRootPath/jsx/example.jsx as mentioned above, while the value of extensionPath should be &quot;ExtensionRootPath/jsx/&quot;
$.evalFile(extensionPath + &#39;example1.jsx&#39;);
$.evalFile(extensionPath + &#39;example2.jsx&#39;);
$.evalFile(extensionPath + &#39;example3.jsx&#39;);
</pre></div>
</div>
<p>But if the <code class="docutils literal notranslate"><span class="pre">$.fileName</span></code> is referred in the FIRST LOADED JSX file, the
value is not correct. That is to say, if the snippet above runs in
<code class="docutils literal notranslate"><span class="pre">example.jsx</span></code> which is referred in the <code class="docutils literal notranslate"><span class="pre">manifest.xml</span></code>, the error
will arise. So, PLEASE AVOID using <code class="docutils literal notranslate"><span class="pre">$.fileName</span></code> in the FIRST LOADED
JSX file, maybe this is a limitation in ExtendScript. The workaround is
to refer it in the second loaded and afterward JSX files. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// After finishing loading the jsx file refered in the manifest.xml, please use evalScript of CSInterface to load other jsx files.
// &quot;anotherJSXFile&quot; is not the first loaded jsx file, so the value of &quot;$.fileName&quot; in it&#39;s stage is correct.
CSInterface.evalScript(&#39;$.evalFile(anotherJSXFile)&#39;, callback);

// Or in the first loaded jsx file, load another jsx file, and the value of &quot;$.fileName&quot; is correct in this file.
// Given the code is running this example.jsx which is referred in the manifest.xml.
// In the stage of &quot;hardCodeJSXFile&quot;, the value of &quot;$.fileName&quot; is correct too.
$.evalFile(hardCodeJSXFile);
</pre></div>
</div>
<p>Note: Since the script in this section is intended to be executed in
host application’s ExtendScript, <code class="docutils literal notranslate"><span class="pre">$</span></code> in this section is different from
jquery global variable <code class="docutils literal notranslate"><span class="pre">$</span></code>.</p>
<p>Please use “namespace” if the developers want to define new
variable/function/object in Global Space or <code class="docutils literal notranslate"><span class="pre">$</span></code> object. If the same
name defined in multiple JSX files, the definition in the last loaded
JSX file will take effect, and the definition in the previous loaded JSX
files will be overridden. For example, <code class="docutils literal notranslate"><span class="pre">$.ext</span></code> is defined in a.jsx,
b.jsx and c.jsx, and in a.jsx <code class="docutils literal notranslate"><span class="pre">$.ext</span></code> is a function, in b.jsx
<code class="docutils literal notranslate"><span class="pre">$.ext</span></code> is an object and in c.jsx <code class="docutils literal notranslate"><span class="pre">$.ext</span></code> is a string, and the load
sequence is a.jsx-&gt;b.jsx-&gt;c.jsx, after loading, <code class="docutils literal notranslate"><span class="pre">$.ext</span></code> is a string,
rather than an object or a function. And this behavior will be across
multiple extension running in the same point product, for example, if
a.jsx, b.jsx and c.jsx belong to extension a,b,c separately, and
extension loading order is extension a-&gt; extension b-&gt; extension c,
<code class="docutils literal notranslate"><span class="pre">$.ext</span></code> will be still a string, rather than a function or an object.</p>
</div>
<div class="section" id="drag-and-drop">
<h3>Drag and Drop<a class="headerlink" href="#drag-and-drop" title="Permalink to this headline">¶</a></h3>
<div class="section" id="use-drag-and-drop">
<h4>Use Drag and Drop<a class="headerlink" href="#use-drag-and-drop" title="Permalink to this headline">¶</a></h4>
<p>CEP 5.2 support HTML 5 Drag and Drop. There are four types.</p>
<ol class="arabic simple">
<li>Drag and drop inside HTML extension.</li>
<li>Drag and drop between two HTML extensions</li>
<li>Drag and drop between HTML extension and its host application.</li>
<li>Drag and drop between HTML extension and operating system
(e.g.&nbsp;Desktop or Browser).</li>
</ol>
<p>To learn about HTML 5 Drag and Drop and how to use it by JavaScript,
please refer to <a class="reference external" href="http://www.w3.org/TR/html5/editing.html#dnd">http://www.w3.org/TR/html5/editing.html#dnd</a>.</p>
<p>Here are some demos.</p>
<ul class="simple">
<li><a class="reference external" href="http://www.w3schools.com/html/html5_draganddrop.asp">http://www.w3schools.com/html/html5_draganddrop.asp</a></li>
<li><a class="reference external" href="http://html5demos.com/">http://html5demos.com/</a></li>
</ul>
</div>
<div class="section" id="disable-drag-and-drop">
<h4>Disable Drag and Drop<a class="headerlink" href="#disable-drag-and-drop" title="Permalink to this headline">¶</a></h4>
<p>Extension developers can disable the default behavior of DnD by
JavaScript.</p>
<p>Method 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">body</span> <span class="n">ondragover</span><span class="o">=</span><span class="s2">&quot;return false&quot;</span> <span class="n">ondrop</span><span class="o">=</span><span class="s2">&quot;return false&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Method 2 (using jQuery)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$(document.body).on(&#39;dragover drop&#39;, function(e) {
  e.preventDefault();
});
</pre></div>
</div>
<p>Please read HTML 5 standard for more details.
<a class="reference external" href="http://www.w3.org/TR/html5/editing.html#event-dragenter">http://www.w3.org/TR/html5/editing.html#event-dragenter</a></p>
</div>
</div>
<div class="section" id="external-javascript-libraries">
<h3>External JavaScript Libraries<a class="headerlink" href="#external-javascript-libraries" title="Permalink to this headline">¶</a></h3>
<p>CEP HTML Engine does not restrict using any extension JavaScript
libraries. As long as a library can be used in CEF Client or Chrome
browser, it should be usable in CEP HTML Engine.</p>
<p>Here are some JavaScript which had been used successfully</p>
<ul class="simple">
<li>JQuery - <a class="reference external" href="http://jquery.com/">http://jquery.com/</a><ul>
<li>Please refer to Node.js section about resolving symbol conflicts.</li>
</ul>
</li>
<li>RequireJS - <a class="reference external" href="http://requirejs.org/">http://requirejs.org/</a><ul>
<li>Please refer to Node.js section about resolving symbol conflicts.</li>
</ul>
</li>
<li>spin.js - <a class="reference external" href="http://fgnass.github.com/spin.js/">http://fgnass.github.com/spin.js/</a></li>
<li>Modernizr - <a class="reference external" href="http://modernizr.com/">http://modernizr.com/</a><ul>
<li>Modernizr is a JavaScript library that detects HTML5 and CSS3
features in the user’s browser.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="npapi-plug-ins">
<h3>NPAPI plug-ins<a class="headerlink" href="#npapi-plug-ins" title="Permalink to this headline">¶</a></h3>
<p>The support for NPAPI plug-ins had been dropped since CEP 4.2. Although
it is still supported by CEP 4.0 and 4.1, but as all the products are
moving to CEP 4.2, we suggest developers not use it.</p>
<p>Don’t embed Java Applet in your extension as they all depend on NPAPI
plug-in.</p>
</div>
<div class="section" id="increase-decrease-font-size-in-html-panel">
<h3>Increase/Decrease font size in HTML Panel<a class="headerlink" href="#increase-decrease-font-size-in-html-panel" title="Permalink to this headline">¶</a></h3>
<p>There are couples of JavaScript ways to increase or decrease font size
in HTML panel either by plain JavaScript or JQuery. The following is the
two pieces of sample snippet to achieve this. One is in plain JavaScript
and the other uses JQuery library.</p>
<ul class="simple">
<li>Plain JavaScript - Use <code class="docutils literal notranslate"><span class="pre">document.body.style.fontSize</span></code> to change
font size in page.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span> <span class="n">language</span><span class="o">=</span><span class="s2">&quot;javascript&quot;</span><span class="o">&gt;</span>
    <span class="n">window</span><span class="o">.</span><span class="n">onload</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">var</span> <span class="n">fontchange</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
        <span class="n">var</span> <span class="n">fontchangelink</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">desc</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">var</span> <span class="n">a</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">);</span>
            <span class="n">a</span><span class="o">.</span><span class="n">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">;</span>
            <span class="n">a</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">margin</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">;</span>
            <span class="n">a</span><span class="o">.</span><span class="n">onclick</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">fontSize</span> <span class="o">=</span> <span class="n">fontsize</span> <span class="o">+</span> <span class="s1">&#39;pt&#39;</span><span class="p">;</span>
            <span class="p">};</span>
            <span class="n">a</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">desc</span><span class="p">;</span>
            <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="n">fontchange</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="s2">&quot;Change font size:&quot;</span><span class="p">));</span>
        <span class="n">fontchange</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">fontchangelink</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">));</span>
        <span class="n">fontchange</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">fontchangelink</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">));</span>
        <span class="n">fontchange</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">fontchangelink</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">));</span>

       <span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">insertBefore</span><span class="p">(</span><span class="n">fontchange</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">};</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li>JQuery - Use <code class="docutils literal notranslate"><span class="pre">$('html').css('font-size',</span> <span class="pre">size)</span></code> to change font size
in page.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;script type=&quot;text/javascript&quot; language=&quot;javascript&quot;&gt;
        $(document).ready(function(){
              // Reset Font Size
              var originalFontSize = $(&#39;html&#39;).css(&#39;font-size&#39;);
              $(&quot;.resetFont&quot;).click(function(){
                $(&#39;html&#39;).css(&#39;font-size&#39;, originalFontSize);
              });

              // Increase Font Size
              $(&quot;.increaseFont&quot;).click(function(){
                 var currentFontSize = $(&#39;html&#39;).css(&#39;font-size&#39;);
                 var currentFontSizeNum = parseFloat(currentFontSize, 10);
                 var newFontSize = currentFontSizeNum*1.2;
                 $(&#39;html&#39;).css(&#39;font-size&#39;, newFontSize);
                 return false;
              });

              // Decrease Font Size
              $(&quot;.decreaseFont&quot;).click(function(){
                 var currentFontSize = $(&#39;html&#39;).css(&#39;font-size&#39;);
                 var currentFontSizeNum = parseFloat(currentFontSize, 10);
                 var newFontSize = currentFontSizeNum*0.8;
                 $(&#39;html&#39;).css(&#39;font-size&#39;, newFontSize);
                 return false;
              });
         });
&lt;/script&gt;
</pre></div>
</div>
<p>The ways above are the common used solution for JavaScript developers to
increase or decrease fonts.</p>
</div>
<div class="section" id="javascript-tips">
<h3>JavaScript Tips<a class="headerlink" href="#javascript-tips" title="Permalink to this headline">¶</a></h3>
<div class="section" id="check-internet-connection">
<h4>Check Internet Connection<a class="headerlink" href="#check-internet-connection" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">navigator</span><span class="o">.</span><span class="n">onLine</span> <span class="o">===</span> <span class="n">true</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">//</span><span class="n">system</span> <span class="ow">is</span> <span class="n">online</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
  <span class="o">//</span><span class="n">system</span> <span class="ow">is</span> <span class="n">offline</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="set-mouse-cursor">
<h4>Set Mouse Cursor<a class="headerlink" href="#set-mouse-cursor" title="Permalink to this headline">¶</a></h4>
<p>Please refer to <a class="reference external" href="http://jsfiddle.net/BfLAh/1390/">http://jsfiddle.net/BfLAh/1390/</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$(document).mousemove(function(e){
    $(&quot;#image&quot;).css({left:e.pageX, top:e.pageY});
});
</pre></div>
</div>
</div>
<div class="section" id="iframe">
<h4>iframe<a class="headerlink" href="#iframe" title="Permalink to this headline">¶</a></h4>
<p>Due to the
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/X-Frame-Options">X-Frame-Options</a>
header a number of HTTPS websites are unavailable to host in an iframe.
An alternative to displaying HTTPS content is to use the
<code class="docutils literal notranslate"><span class="pre">window.location.href</span></code> e.g.</p>
<p><strong>iFrame alternative for HTTPS content</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// html
&lt;body onLoad=&quot;onLoaded()&quot;&gt;
&lt;!--iframe src=&quot;https://www.trello.com&quot;&gt;&lt;/iframe--&gt; &lt;!-- this line can be deleted as HTTPS blocks content being displayed in an iframe --&gt;
&lt;/body&gt;

// javascript
function onLoaded() {
  window.location.href = &quot;https://www.trello.com&quot;;
}
</pre></div>
</div>
</div>
<div class="section" id="tooltip">
<h4>Tooltip<a class="headerlink" href="#tooltip" title="Permalink to this headline">¶</a></h4>
<p>CEP 5.2 supports HTML title attribute to show the tooltip on Windows.
However, it’s not supported on Mac due to off-screen rendering. The
alternative is use JavaScript instead, please refer to
<a class="reference external" href="http://www.a2zwebhelp.com/bootstrap-tooltips">http://www.a2zwebhelp.com/bootstrap-tooltips</a> for good examples.</p>
</div>
</div>
</div>
<div class="section" id="cephtmlengine">
<h2>CEPHtmlEngine<a class="headerlink" href="#cephtmlengine" title="Permalink to this headline">¶</a></h2>
<div class="section" id="multi-process-architecture">
<h3>Multi-process Architecture<a class="headerlink" href="#multi-process-architecture" title="Permalink to this headline">¶</a></h3>
<p>CEP and the underlying Chromium have multi-process architecture. Each
CEP extension runs in a separate CEP HTML Engine, which might have three
processes - one main/browser process, one renderer process, and one GPU
process. On Max OSX, the main process is named <code class="docutils literal notranslate"><span class="pre">CEPHtmlEngine</span></code>, and
the other two process are named <code class="docutils literal notranslate"><span class="pre">CEPHtmlEngine</span> <span class="pre">Helper</span></code>. On Windows,
all the three processes are named <code class="docutils literal notranslate"><span class="pre">CEPHtmlEngine.exe</span></code>. As long as the
extensions are well implemented, having multiple processes should not be
a performance problem.</p>
<p>You can find what extension a CEP HTML Engine process belongs to by
checking its command line parameters. On Mac OSX, please use
<code class="docutils literal notranslate"><span class="pre">ps</span> <span class="pre">-ef</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">CEPHtmlEngine</span></code> in a terminal to check the command line.
On Windows, please refer to
<a class="reference external" href="http://superuser.com/questions/415360/how-do-i-find-out-command-line-arguments-of-a-running-program">http://superuser.com/questions/415360/how-do-i-find-out-command-line-arguments-of-a-running-program</a>
to check the command line. The browser process does not have <code class="docutils literal notranslate"><span class="pre">--type</span></code>
in the command line, while the renderer process and the GPU process have
<code class="docutils literal notranslate"><span class="pre">--type=renderer</span></code> and <code class="docutils literal notranslate"><span class="pre">--type=gpu-process</span></code> in the command line.</p>
</div>
<div class="section" id="ports-opened-in-cephtmlengine">
<h3>Ports opened in CEPHtmlEngine<a class="headerlink" href="#ports-opened-in-cephtmlengine" title="Permalink to this headline">¶</a></h3>
<p>If you use
<a class="reference external" href="https://technet.microsoft.com/en-us/sysinternals/tcpview.aspx">TCPView</a>
to monitor <code class="docutils literal notranslate"><span class="pre">CEPHtmlEngine</span></code> process, you may see some ports are opened
in localhost. Most of the ports are opened internally in Chromium code
for <code class="docutils literal notranslate"><span class="pre">websocket</span></code>, which is initiated by HTML extension instead of
<code class="docutils literal notranslate"><span class="pre">CEPHtmlEngine</span></code> itself. You can use
<a class="reference external" href="http://www.netresec.com/?page=RawCap">RawCap</a> to capture the data in
*.pcap file and open it in <a class="reference external" href="https://www.wireshark.org/">Wireshark</a>
to examine the details.</p>
</div>
<div class="section" id="cef-chromium-issues">
<h3>CEF/Chromium Issues<a class="headerlink" href="#cef-chromium-issues" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><cite>HTML ``&lt;datalist&gt;`</cite> tag is not
supported &lt;<a class="reference external" href="https://bitbucket.org/chromiumembedded/cef/issues/906">https://bitbucket.org/chromiumembedded/cef/issues/906</a>&gt;`__</li>
<li><a class="reference external" href="https://bitbucket.org/chromiumembedded/cef/issues/899">HTML5 input type color is not
supported</a></li>
</ul>
</div>
</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<p>Developers can use the following forums and github repositories to ask
questions and create bugs/feature requests</p>
<ul class="simple">
<li><a class="reference external" href="https://forums.adobe.com/community/creativesuites/extensionbuilder">https://forums.adobe.com/community/creativesuites/extensionbuilder</a></li>
<li><a class="reference external" href="https://github.com/Adobe-CEP/CEP-Resources/issues">https://github.com/Adobe-CEP/CEP-Resources/issues</a></li>
<li><a class="reference external" href="https://github.com/Adobe-CEP/Samples/issues">https://github.com/Adobe-CEP/Samples/issues</a></li>
<li><a class="reference external" href="https://www.adobeprerelease.com">https://www.adobeprerelease.com</a></li>
</ul>
<div class="section" id="contribution">
<h3>Contribution<a class="headerlink" href="#contribution" title="Permalink to this headline">¶</a></h3>
<p>If you like to contribute for extension development, please raise your
PR at <a class="reference external" href="https://github.com/Adobe-CEP">https://github.com/Adobe-CEP</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CEP/csinterface.html" class="btn btn-neutral float-right" title="CSInterface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ScriptUI/Window/onShow.html" class="btn btn-neutral" title="Window.onShow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Brett Dixon.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>